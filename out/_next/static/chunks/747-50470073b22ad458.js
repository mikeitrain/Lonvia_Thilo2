"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{7415:(e,t,s)=>{s.d(t,{l:()=>E});var a=s(4848),r=s(6540),n=s(6578),i=s(98),d=s(780),l=s(3725),o=s(6577),c=s(2349),m=s(9868),u=s(476),x=s(408);let p=e=>l.c.getValidTransitions(e),h=e=>{let{isOpen:t,onClose:s,currentStatus:n}=e,{t:d}=(0,i.o)(),o=(0,r.useMemo)(()=>[x.y.NEW,x.y.OFFER_SENT,x.y.WAITING_FOR_PAYMENT,x.y.PAID,x.y.TIMESLOTS_SENT,x.y.ARRANGED,x.y.IN_CONSULTATION,x.y.FINISHED,x.y.DECLINED],[]),c=n?p(n):[],m=(0,r.useMemo)(()=>{let e=o.map(e=>d(l.c.statusToTranslationKey(e))),t=document.createElement("canvas").getContext("2d");if(!t)return 0;t.font="500 14px system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif";let s=0;for(let a of e){let e=t.measureText(a).width;e>s&&(s=e)}return Math.ceil(s+24)},[d,o]);return(0,a.jsx)(u.A,{isOpen:t,onClose:s,size:"lg",title:d("status.flowTitle")||"Status flow",children:(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("div",{className:"text-sm text-foreground-secondary",children:d("status.setByAdmin")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-foreground-secondary mb-3",children:d("status.flowOverview")||"Overview of statuses and their meaning:"}),(0,a.jsx)("ol",{className:"grid gap-3 m-0 p-0 list-none",children:o.map(e=>{let t=l.c.getStatusInfo(e),s=l.c.getStatusColorClasses(e),r=n===e,i=c.includes(e);return(0,a.jsxs)("li",{className:"grid grid-cols-[24px_1fr] gap-3 items-stretch relative",children:[(0,a.jsxs)("div",{className:"relative flex items-stretch justify-center",children:[(0,a.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-0 bottom-0 w-0.5 bg-border-primary"}),(0,a.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full ".concat(r?"bg-primary-600 ring-4 ring-primary-600/20":"bg-foreground-tertiary ring-4 ring-white")})]}),(0,a.jsx)("div",{className:"w-full min-h-[72px] bg-background-primary border border-border-primary rounded-xl shadow-sm p-4 ".concat(i?"ring-1 ring-primary-600/50":""),children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shrink-0 justify-center ".concat(s),style:{width:m?"".concat(m,"px"):void 0},children:d(l.c.statusToTranslationKey(e))}),(0,a.jsx)("span",{className:"text-sm text-foreground-secondary",children:d("status.flow.".concat(e.toLowerCase()))||t.description})]})})]},e)})})]})]})})};var g=s(1028),f=s(306),b=s(8510),v=s(548);let j=e=>{var t;let{caseData:s,onCaseUpdated:n,doctors:o=[]}=e,{t:c,translateStatus:u,language:p}=(0,i.o)(),[h,j]=(0,r.useState)(s.admin_notes||""),[y,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[S,A]=(0,r.useState)(""),[C,E]=(0,r.useState)(30),[O,I]=(0,r.useState)(""),[T,D]=(0,r.useState)(""),_=()=>new Date(new Date().getTime()+1728e5).toISOString().slice(0,16),[L,M]=(0,r.useState)(!1),[R,B]=(0,r.useState)(""),[Z,P]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{var t,s;let a=await (0,v.$)(),r=null===(s=a.tokens)||void 0===s?void 0:null===(t=s.idToken)||void 0===t?void 0:t.payload,n=(null==r?void 0:r["cognito:groups"])||[];e&&M(n.includes("admin"))}catch(t){e&&M(!1)}})(),()=>{e=!1}},[]);let F=l.c.toCaseStatus((null===(t=s.status)||void 0===t?void 0:t.name)||""),W=F?l.c.getValidTransitions(F):[],H=!!F&&l.c.isActiveStatus(F),U=F===x.y.NEW,V=F===x.y.WAITING_FOR_PAYMENT,Y=F===x.y.PAID;(0,r.useEffect)(()=>{j(s.admin_notes||"")},[s.id,s.admin_notes]);let G=async()=>{if(!s.id)return;let e=m.k.getInstance(),t={};t.admin_notes=h;let a=await e.updateCase(String(s.id),t);n&&n(a)},z=async()=>{if(!s.id||!y)return;let e=m.k.getInstance(),t={};t.status={id:0,name:y};let a=await e.updateCase(String(s.id),t);n&&n(a)},q=async()=>{if(!s.id)return;let e=m.k.getInstance(),t=Number(R);if(!Z||!t||t<=0)return;let a=await e.sendOffer({caseId:String(s.id)},{text:Z,amount_gross:t});n&&n(a)},K=async()=>{if(!s.id)return;let e=m.k.getInstance(),t=await e.markInvoicePaid({caseId:String(s.id)});n&&n(t)},J=async()=>{if(!s.id)return;if(I(""),!w&&!S){I(c("case.details.appointmentError"));return}if(!T){I(c("case.details.doctorError"));return}let e=m.k.getInstance(),t=[];w&&t.push({scheduledStart:w,meetingStatus:"suggested",durationMinutes:C}),S&&t.push({scheduledStart:S,meetingStatus:"suggested",durationMinutes:C});let a={caseId:s.id,doctorId:T,suggestedAppointments:t},r=await e.suggestAppointment(a);n&&n(r),k(""),A(""),D("")};if(!L)return null;let $="w-48";return(0,a.jsxs)("div",{className:"mb-6 bg-background-secondary rounded-lg border border-border-primary p-4 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-foreground-primary",children:c("admin.panel.title")||"Admin Panel"}),(0,a.jsx)(g.A,{marginClass:"my-1"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,a.jsxs)("div",{className:"md:col-span-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:c("case.details.notes")||"Notes"}),(0,a.jsx)("textarea",{className:"w-full input-field min-h-[80px] disabled:opacity-60 disabled:cursor-not-allowed",value:h,onChange:e=>j(e.target.value),disabled:!H})]}),(0,a.jsx)("div",{className:"md:col-span-1 flex md:justify-end",children:(0,a.jsx)("button",{disabled:!H,onClick:G,className:"bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ".concat($),children:c("common.save")||"Save"})})]}),(0,a.jsx)(g.A,{marginClass:"my-3"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,a.jsxs)("div",{className:"md:col-span-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:c("offer.text")||"Offer text"}),(0,a.jsx)("textarea",{className:"w-full input-field min-h-[80px] disabled:opacity-60 disabled:cursor-not-allowed",value:Z,onChange:e=>P(e.target.value),disabled:!U})]}),(0,a.jsx)("div",{className:"md:col-span-1 h-full",children:(0,a.jsx)(f.A,{label:c("offer.amount")||"Amount",value:R,onChange:e=>B(e.target.value),disabled:!U,placeholder:c("offer.amount")||"Amount"})}),(0,a.jsx)("div",{className:"md:col-span-1 flex md:justify-end",children:(0,a.jsx)("button",{disabled:!U,onClick:q,className:"bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ".concat($),children:c("offer.send")||"Send offer"})})]}),(0,a.jsx)(g.A,{marginClass:"my-3"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,a.jsx)("div",{className:"md:col-span-4"}),(0,a.jsx)("div",{className:"md:col-span-1 flex md:justify-end",children:(0,a.jsx)("button",{disabled:!V,onClick:K,className:"bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ".concat($),children:c("invoice.paid")||"Paid"})})]}),(0,a.jsx)("div",{className:"my-3 flex justify-center",children:(0,a.jsx)("div",{className:"h-[1px] w-full",style:{backgroundColor:"var(--border-secondary)"}})}),s.appointments&&s.appointments.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground-primary",children:c("case.details.existingAppointments")||"Existing Appointments"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.appointments.map(e=>{let t="accepted"===e.meetingStatus?"bg-green-100 border-green-300 text-green-800":"suggested"===e.meetingStatus?"bg-blue-100 border-blue-300 text-blue-800":"declined"===e.meetingStatus?"bg-red-100 border-red-300 text-red-800":"completed"===e.meetingStatus?"bg-gray-100 border-gray-300 text-gray-800":"canceled"===e.meetingStatus?"bg-orange-100 border-orange-300 text-orange-800":"bg-gray-100 border-gray-300 text-gray-800";return(0,a.jsx)("div",{className:"border rounded-lg p-4 ".concat(t),children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:[(0,d.Yq)(e.scheduledStart,p)," - ",(0,d.fU)(e.scheduledStart,p)]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(t),children:e.meetingStatus})]}),(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[e.doctorName&&(0,a.jsx)("div",{className:"text-sm font-medium",children:e.doctorName}),(0,a.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(t),children:[e.durationMinutes," min"]})]})]})},e.id)})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[Y&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:c("case.details.timezoneInfo.title")||"Hinweis:"})," ",c("case.details.timezoneInfo.message")||"Die eingegebene Zeit ist immer in deutscher Zeit (GMT+2)."]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:[c("case.details.appointmentDate")," 1"]}),(0,a.jsx)("input",{type:"datetime-local",className:"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed ".concat(O?"border-red-500 focus:border-red-500 focus:ring-red-500":""),value:w,min:_(),onChange:e=>{k(e.target.value),O&&I("")},disabled:!Y}),O&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:O})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:[c("case.details.appointmentDate")," 2"]}),(0,a.jsx)("input",{type:"datetime-local",className:"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed",value:S,min:_(),onChange:e=>{A(e.target.value),O&&I("")},disabled:!Y})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:c("case.details.duration")}),(0,a.jsxs)("select",{className:"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed",value:C,onChange:e=>E(Number(e.target.value)),disabled:!Y,children:[(0,a.jsx)("option",{value:10,children:c("case.details.durationOptions.10min")}),(0,a.jsx)("option",{value:15,children:c("case.details.durationOptions.15min")}),(0,a.jsx)("option",{value:20,children:c("case.details.durationOptions.20min")}),(0,a.jsx)("option",{value:30,children:c("case.details.durationOptions.30min")}),(0,a.jsx)("option",{value:45,children:c("case.details.durationOptions.45min")}),(0,a.jsx)("option",{value:60,children:c("case.details.durationOptions.60min")}),(0,a.jsx)("option",{value:90,children:c("case.details.durationOptions.90min")}),(0,a.jsx)("option",{value:120,children:c("case.details.durationOptions.120min")})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:(0,a.jsxs)("div",{className:"md:col-span-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:c("case.details.doctor")}),(0,a.jsxs)("select",{className:"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed ".concat(O?"border-red-500 focus:border-red-500 focus:ring-red-500":""),value:T,onChange:e=>{D(e.target.value?Number(e.target.value):""),O&&I("")},disabled:!Y,children:[(0,a.jsx)("option",{value:"",children:c("case.details.selectDoctor")}),o.map(e=>{var t,s;return(0,a.jsxs)("option",{value:e.id,children:[null===(t=e.user)||void 0===t?void 0:t.firstName," ",null===(s=e.user)||void 0===s?void 0:s.lastName,e.title&&" (".concat(e.title,")")]},e.id)})]})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{disabled:!Y||!w&&!S||!T,onClick:J,className:"bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ".concat($),children:c("case.details.suggestAppointments")||"Suggest appointments"})})]}),(0,a.jsx)(g.A,{marginClass:"my-1"}),(0,a.jsx)(g.A,{marginClass:"my-1"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[(0,a.jsxs)("div",{className:"md:col-span-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-foreground-secondary mb-1",children:c("status.next")||"Next status"}),(0,a.jsxs)("select",{className:"input-field w-full disabled:opacity-60 disabled:cursor-not-allowed",value:y,onChange:e=>N(e.target.value),children:[(0,a.jsx)("option",{value:"",children:c("common.select")||"Select"}),W.map(e=>(0,a.jsx)("option",{value:e,children:u(e)},e))]})]}),(0,a.jsx)("div",{className:"md:col-span-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-2 bg-warning-50 text-warning-800 border border-warning-300 rounded-md p-3",children:[(0,a.jsx)(b.A,{className:"h-5 w-5 text-warning-600 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm",children:c("admin.status.manualChangeWarning")||"This action should only be used in special cases. Normally, the status changes automatically."})]})}),(0,a.jsx)("div",{className:"md:col-span-1 flex md:justify-end",children:(0,a.jsx)("button",{onClick:z,className:"bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ".concat($),children:c("status.set")||"Set status"})})]})]})};var y=s(8645);let N=e=>{var t,s,r;let{caseData:d}=e,{userGroups:l}=(0,n.A)(),{t:o}=(0,i.o)();return(0,a.jsxs)(a.Fragment,{children:[(null==l?void 0:l.includes("patient"))&&(null===(t=d.status)||void 0===t?void 0:t.name)===x.y.WAITING_FOR_PAYMENT&&(0,a.jsx)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(y.A,{className:"h-5 w-5 text-blue-400"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:o("case.details.paymentWarning.title")||"Payment Required"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,a.jsx)("p",{children:o("case.details.paymentWarning.message")||"Please pay the invoice to continue with your case. You received the invoice via email. You can also download the invoice below."})}),(0,a.jsx)("div",{className:"mt-3 text-xs text-blue-600",children:(0,a.jsx)("p",{children:o("case.details.paymentWarning.alreadyPaid")||"Already paid? This info will disappear once payment is confirmed."})})]})]})}),(null==l?void 0:l.includes("patient"))&&(null===(s=d.status)||void 0===s?void 0:s.name)===x.y.OFFER_SENT&&(0,a.jsx)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(y.A,{className:"h-5 w-5 text-green-400"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-green-800",children:o("case.details.offerInfo.title")||"Offer Received"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,a.jsx)("p",{children:o("case.details.offerInfo.message")||"Please read the offer carefully. You received it via email or you can download it below. You need to accept it to continue."})}),(0,a.jsx)("div",{className:"mt-3 text-xs text-green-600",children:(0,a.jsx)("p",{children:o("case.details.offerInfo.validity")||"The offer is valid for 2 weeks."})})]})]})}),(null==l?void 0:l.includes("patient"))&&(null===(r=d.status)||void 0===r?void 0:r.name)===x.y.TIMESLOTS_SENT&&(0,a.jsx)("div",{className:"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(y.A,{className:"h-5 w-5 text-purple-400"})}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-purple-800",children:o("case.details.timeslotsInfo.title")||"Choose Your Appointment"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-purple-700",children:(0,a.jsx)("p",{children:o("case.details.timeslotsInfo.message")||"Please select one of the suggested appointment times below to continue with your case."})})]})]})})]})};var w=s(8283);let k=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}),S=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}),A=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))});var C=s(656);let E=e=>{var t,s,u,p,g;let{caseData:f,onUpdated:b,doctors:v=[]}=e,{userGroups:y}=(0,n.A)(),{language:E,t:O,translateSymptomSeverity:I,translateSymptomDuration:T,translateStatus:D,translateGender:_}=(0,i.o)(),[L,M]=(0,r.useState)({isOpen:!1,attachment:null}),[R,B]=(0,r.useState)(f.attachments||[]),[Z,P]=(0,r.useState)(f),[F,W]=(0,r.useState)(!1),[H,U]=(0,r.useState)(null),[V,Y]=(0,r.useState)(!1),[G,z]=(0,r.useState)(!1),[q,K]=(0,r.useState)(null);(0,r.useEffect)(()=>{B(f.attachments||[])},[f.attachments]),(0,r.useEffect)(()=>{W(!!Array.isArray(y)&&(y.includes("admin")||y.includes("patient")))},[y]);let J=!!Array.isArray(y)&&y.includes("patient"),$=l.c.extractStatus(Z.status)===x.y.OFFER_SENT,Q=(Z.documents||[]).find(e=>"offer"===String(e.doc_type||"").toLowerCase()),X=e=>{M({isOpen:!0,attachment:e})},ee=async()=>{try{if(L.attachment&&L.attachment.id&&Z.id){let e=m.k.getInstance();await e.deleteAttachment({attachmentId:String(L.attachment.id),caseId:"number"==typeof Z.id?Z.id:Number(Z.id)}),B(e=>e.filter(e=>e.id!==L.attachment.id))}}finally{M({isOpen:!1,attachment:null})}},et=e=>{switch(e){case"DICOM":return O("case.details.download");case"Link":return O("case.details.open");default:return O("case.details.view")}},es=async e=>{if(!e.id||!Z.id)return;let t=m.k.getInstance(),{url:s}=await t.getAttachmentUrl({attachmentId:String(e.id),caseId:"number"==typeof Z.id?Z.id:Number(Z.id)});window.open(s,"_blank","noopener,noreferrer")},ea=async e=>{if(Z.id){U(e);try{let t=m.k.getInstance(),{url:s}=await t.getDocumentUrl({caseId:String(Z.id),docType:e}),a=document.createElement("a");a.href=s,a.download="",document.body.appendChild(a),a.click(),a.remove()}finally{U(null)}}},er=async()=>{if(Z.id){z(!0);try{let e=m.k.getInstance(),t=await e.acceptOffer(String(Z.id));P(t),B(t.attachments||[]),b&&b(t)}finally{z(!1)}}},en=async()=>{if(Z.id&&q){z(!0);try{let e=m.k.getInstance(),t=await e.acceptAppointment(String(q),String(Z.id));P(t),B(t.attachments||[]),b&&b(t)}finally{z(!1)}}},ei=async()=>{if(Z.id){z(!0);try{let e=m.k.getInstance(),t=await e.declineAppointment(String(Z.id));P(t),B(t.attachments||[]),b&&b(t)}finally{z(!1)}}},[ed,el]=(0,r.useState)(!1),[eo,ec]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{},[f.id]),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-foreground-primary",children:["Case ",Z.id]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>ec(!0),className:"text-sm text-primary-600 hover:underline",children:O("status.moreInfo")||"Click here for more information"}),(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center ".concat((e=>{let t=l.c.extractStatus(e);return t?l.c.getStatusColorClasses(t):"status-neutral"})(Z.status)),children:(e=>{let t=l.c.extractStatus(e);if(t)return D(t);let s=null;return"string"==typeof e?s=e:e&&"object"==typeof e&&"name"in e&&(s="string"==typeof e.name?e.name:null),s?s.replace(/_/g," "):O("status.unknown")||"Unknown"})(Z.status)})]})]}),(0,a.jsx)(j,{caseData:Z,doctors:v,onCaseUpdated:e=>{P(e),B(e.attachments||[]),b&&b(e)}}),(0,a.jsx)(N,{caseData:Z}),F&&Z.documents&&Z.documents.length>0&&(0,a.jsxs)("div",{className:"mb-6 bg-background-secondary rounded-lg border border-border-primary p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-foreground-primary mb-4",children:O("case.details.receipts")||"Documents"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:Z.documents.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-neutral-50 rounded-md p-4 border border-border-primary",children:[(0,a.jsxs)("div",{className:"flex-1 mr-4",children:[(0,a.jsx)("div",{className:"text-xs font-bold text-foreground-tertiary mb-1",children:function(e,t){if(!e)return"";let s=String(e).trim().toLowerCase();switch(s){case"offer":return t("documents.offer")||"Offer";case"invoice":return t("documents.invoice")||"Invoice";default:return s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():""}}(e.doc_type,O)}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"shrink-0 text-primary-600",children:(0,a.jsx)(w.A,{className:"w-10 h-10"})}),(0,a.jsx)("div",{className:"text-foreground-secondary text-sm",children:e.doc_no})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("button",{onClick:()=>ea(e.doc_type),disabled:H===e.doc_type,className:"bg-primary-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-700 transition-colors disabled:opacity-60 inline-flex items-center gap-2",children:(0,a.jsx)(k,{className:"w-4 h-4"})})})]},"".concat(e.doc_no||t)))})]}),J&&$&&(0,a.jsx)("div",{className:"m-6 flex justify-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>Y(!0),className:"bg-accent-500 hover:bg-accent-600 text-white px-6 py-2 rounded-md font-medium transition-colors",children:O("case.details.acceptOffer")||"Accept offer"})}),(null===(t=Z.status)||void 0===t?void 0:t.name)===x.y.TIMESLOTS_SENT&&Z.appointments&&(0,a.jsxs)("div",{className:"mb-6 bg-background-secondary rounded-lg border border-border-primary p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-foreground-primary mb-4",children:O("case.details.suggestedTimeslots")||"Suggested Timeslots"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-3 mb-6",children:Z.appointments.filter(e=>"suggested"===e.meetingStatus).map(e=>{let t=new Date(e.scheduledStart||""),s=q===e.id;return(0,a.jsxs)("button",{onClick:()=>{(null==y?void 0:y.includes("patient"))&&K(s?null:e.id||null)},disabled:!(null==y?void 0:y.includes("patient")),className:"\n                      px-4 py-3 rounded-lg border-2 text-center min-w-[200px] transition-all duration-200\n                      ".concat(s?"border-primary-500 bg-primary-50 text-primary-700":"border-border-secondary bg-background-primary text-foreground-primary hover:border-primary-300","\n                      ").concat((null==y?void 0:y.includes("patient"))?"cursor-pointer hover:shadow-md":"cursor-default opacity-75","\n                    "),children:[(0,a.jsx)("div",{className:"font-medium",children:t.toLocaleDateString("ro"===E?"ro-RO":"de"===E?"de-DE":"en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"ro"===E?"Europe/Bucharest":"de"===E?"Europe/Berlin":"Europe/London"})}),(0,a.jsx)("div",{className:"text-sm text-foreground-secondary",children:t.toLocaleTimeString("ro"===E?"ro-RO":"de"===E?"de-DE":"en-GB",{hour:"2-digit",minute:"2-digit",timeZone:"ro"===E?"Europe/Bucharest":"de"===E?"Europe/Berlin":"Europe/London"})}),(0,a.jsxs)("div",{className:"text-xs text-foreground-secondary mt-1",children:[O("case.details.duration")||"Duration",": ",e.durationMinutes||30," min"]})]},e.id)})}),(null==y?void 0:y.includes("patient"))&&(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("button",{onClick:ei,disabled:G,className:"\n                  px-6 py-3 rounded-lg font-medium transition-all duration-200 border-2\n                  ".concat(G?"border-gray-300 text-gray-400 cursor-not-allowed":"border-red-500 text-red-600 hover:bg-red-50 hover:border-red-600","\n                "),children:G?O("common.working")||"Working...":O("case.details.declineTimeslot")||"Decline"}),(0,a.jsx)("button",{onClick:en,disabled:!q||G,className:"\n                  px-6 py-3 rounded-lg font-medium transition-all duration-200\n                  ".concat(q&&!G?"bg-primary-600 text-white hover:bg-primary-700 shadow-md":"bg-gray-300 text-gray-500 cursor-not-allowed","\n                "),children:G?O("common.working")||"Working...":O("case.details.acceptTimeslot")||"Accept Timeslot"})]})]}),l.c.extractStatus(Z.status)===x.y.ARRANGED&&Z.appointments&&(0,a.jsx)("div",{className:"mb-6 bg-green-50 border-2 border-green-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(S,{className:"w-5 h-5 text-green-600"})})}),(0,a.jsxs)("div",{className:"ml-4 flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:O("case.details.appointmentArranged.title")}),Z.appointments.filter(e=>"accepted"===e.meetingStatus||"arranged"===e.meetingStatus).map(e=>{let t=new Date(e.scheduledStart||"");return(0,a.jsxs)("div",{className:"bg-white rounded-md p-4 mb-4 border border-green-200",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-700 mb-1",children:O("case.details.appointmentArranged.date")}),(0,a.jsx)("div",{className:"text-green-800",children:t.toLocaleDateString("ro"===E?"ro-RO":"de"===E?"de-DE":"en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"ro"===E?"Europe/Bucharest":"de"===E?"Europe/Berlin":"Europe/London"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-700 mb-1",children:O("case.details.appointmentArranged.time")}),(0,a.jsx)("div",{className:"text-green-800",children:t.toLocaleTimeString("ro"===E?"ro-RO":"de"===E?"de-DE":"en-GB",{hour:"2-digit",minute:"2-digit",timeZone:"ro"===E?"Europe/Bucharest":"de"===E?"Europe/Berlin":"Europe/London"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-700 mb-1",children:O("case.details.appointmentArranged.duration")}),(0,a.jsxs)("div",{className:"text-green-800",children:[e.durationMinutes||30," min"]})]})]}),e.meetingUrl&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-green-200",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-green-700 mb-2",children:"Meeting Link:"}),(0,a.jsxs)("a",{href:e.meetingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition-colors",children:[(0,a.jsx)(A,{className:"w-4 h-4 mr-2"}),"Join Meeting"]})]})]},e.id)}),(0,a.jsx)("div",{className:"text-green-700 text-sm leading-relaxed",children:O("case.details.appointmentArranged.message")})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-background-secondary rounded-lg border border-border-primary p-6 h-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-foreground-primary mb-4",children:Z.has_diagnosis?O("case.details.diagnosis"):O("case.details.medicalForm")}),(0,a.jsx)("div",{className:"space-y-4",children:Z.has_diagnosis?(0,a.jsx)(C.A,{items:(R||[]).filter(e=>e.is_diagnosis).map((e,t)=>({id:String(e.id||t),label:"Link"===e.type.name?e.description||e.url||"Link ".concat(t+1):e.originalName||"Document ".concat(t+1),typeName:e.type.name,showDelete:!e.is_diagnosis,metaRight:(0,d.Yq)(e.createdAt,E)})),showOpen:!0,openText:e=>{var t,s;return et((null===(s=(R||[]).find(t=>String(t.id)===String(e.id)))||void 0===s?void 0:null===(t=s.type)||void 0===t?void 0:t.name)||"")},onOpen:e=>{let t=(R||[]).find(t=>String(t.id)===String(e));t&&es(t)},deleteText:O("case.details.delete")||"Delete"}):(0,a.jsx)(a.Fragment,{children:Z.symptoms&&Z.symptoms.length>0?Z.symptoms.map((e,t)=>(0,a.jsxs)("div",{className:"bg-neutral-50 rounded-md p-4 border border-border-primary",children:[(0,a.jsx)("div",{className:"font-medium text-foreground-primary mb-1",children:"".concat(O("case.details.symptom")," ").concat(t+1," - ").concat(I(e.severity)," (").concat(T(e.duration),")")}),(0,a.jsx)("div",{className:"text-foreground-secondary",children:e.description||O("case.details.answerOfUser")})]},t)):(0,a.jsx)("div",{className:"text-center py-8 text-foreground-tertiary",children:(0,a.jsx)("p",{className:"text-sm",children:"No symptoms recorded"})})})})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-background-secondary rounded-lg border border-border-primary p-6 h-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-foreground-primary mb-4",children:O("case.details.notes")}),(0,a.jsx)("div",{className:"bg-neutral-50 rounded-md p-4 min-h-[200px] border border-border-primary",children:(0,a.jsx)("textarea",{className:"w-full h-full bg-transparent border-none outline-none resize-none text-foreground-secondary placeholder-foreground-tertiary",placeholder:O("case.details.notesPlaceholder"),defaultValue:Z.case_notes||"",rows:8})})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-background-secondary rounded-lg border border-border-primary p-6 h-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-foreground-primary mb-4",children:O("case.details.documents")}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(C.A,{items:(R||[]).filter(e=>!e.is_diagnosis).map((e,t)=>({id:String(e.id||t),label:"Link"===e.type.name?e.description||e.url||"Link ".concat(t+1):e.originalName||"Document ".concat(t+1),typeName:e.type.name,showDelete:!e.is_diagnosis,metaRight:(0,d.Yq)(e.createdAt,E)})),showOpen:!0,openText:e=>{var t,s;return et((null===(s=(R||[]).find(t=>String(t.id)===String(e.id)))||void 0===s?void 0:null===(t=s.type)||void 0===t?void 0:t.name)||"")},onOpen:e=>{let t=(R||[]).find(t=>String(t.id)===String(e));t&&es(t)},onDelete:e=>{let t=(R||[]).find(t=>String(t.id)===String(e));t&&X(t)},deleteText:O("case.details.delete")||"Delete"}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)("button",{onClick:()=>el(!0),className:"bg-primary-600 text-white px-6 py-2 rounded-md font-medium hover:bg-primary-700 transition-colors",children:O("case.details.upload")})})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-background-secondary rounded-lg border border-border-primary p-6 h-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-foreground-primary mb-4",children:O("case.details.infos")}),(0,a.jsxs)("div",{className:"bg-neutral-50 rounded-md p-4 space-y-3 border border-border-primary",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-foreground-primary",children:O("case.details.customerName")}),(0,a.jsx)("span",{className:"text-foreground-secondary",children:Z.customer?"".concat(Z.customer.firstName||""," ").concat(Z.customer.lastName||"").trim()||O("demographic.notProvided"):O("demographic.userNotFound")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-foreground-primary",children:O("case.details.appointmentDate")}),(0,a.jsx)("span",{className:"text-foreground-secondary",children:"25.08.2025"})]}),(0,a.jsx)("hr",{className:"border-border-primary"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-foreground-primary",children:O("case.details.gender")}),(0,a.jsx)("span",{className:"text-foreground-secondary",children:(null===(s=Z.customer)||void 0===s?void 0:s.gender)?_(Z.customer.gender):O("demographic.notProvided")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-foreground-primary",children:O("case.details.height")}),(0,a.jsx)("span",{className:"text-foreground-secondary",children:(null===(u=Z.customer)||void 0===u?void 0:u.height)?"".concat(Z.customer.height,"cm"):O("demographic.notProvided")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-foreground-primary",children:O("case.details.weight")}),(0,a.jsx)("span",{className:"text-foreground-secondary",children:(null===(p=Z.customer)||void 0===p?void 0:p.weight)?"".concat(Z.customer.weight,"kg"):O("demographic.notProvided")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-foreground-primary",children:O("case.details.dateOfBirth")}),(0,a.jsx)("span",{className:"text-foreground-secondary",children:(null===(g=Z.customer)||void 0===g?void 0:g.dateOfBirth)?(()=>{let e="string"==typeof Z.customer.dateOfBirth?Z.customer.dateOfBirth:Z.customer.dateOfBirth.toISOString();return(0,d.Yq)(e,E)})():O("demographic.notProvided")})]}),(0,a.jsx)("hr",{className:"border-border-primary"})]})]})})]}),(0,a.jsx)(o.R,{isOpen:L.isOpen,onClose:()=>M({isOpen:!1,attachment:null}),onConfirm:ee,title:O("case.details.deleteConfirmTitle"),message:O("case.details.deleteConfirm")}),(0,a.jsx)(o.R,{isOpen:V,onClose:()=>Y(!1),onConfirm:er,title:O("case.details.acceptOfferTitle")||"Accept offer",message:O("case.details.acceptOfferMessage")||"Do you want to accept the offer".concat((null==Q?void 0:Q.doc_no)?" ".concat(Q.doc_no):"","? By accepting, you confirm that you have read and understood the offer."),confirmText:G?O("common.working")||"Working...":O("case.details.acceptOffer")||"Accept offer",cancelText:O("case.details.cancel")||"Cancel"}),(0,a.jsx)(c.A,{isOpen:ed,onClose:()=>el(!1),caseId:"number"==typeof Z.id?Z.id:Z.id?Number(Z.id):void 0,onUploaded:async()=>{if(!Z.id)return;let e=m.k.getInstance();B((await e.getCaseById(String(Z.id))).attachments||[])}}),(0,a.jsx)(h,{isOpen:eo,onClose:()=>ec(!1),currentStatus:l.c.extractStatus(Z.status)})]})}},2858:(e,t,s)=>{s.d(t,{A:()=>m});var a=s(4848),r=s(6540),n=s(98),i=s(3725),d=s(3615),l=s(8283),o=s(861);let c=r.forwardRef(function(e,t){let{title:s,titleId:a,...n}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}),m=e=>{let{cases:t,onCaseClick:s,className:r="",viewMode:m="standard"}=e,{t:u,translateStatus:x}=(0,n.o)(),{isLoading:p}=(0,d.r)(),h=e=>{if(!e||!e.name)return"status-neutral";let t=i.c.toCaseStatus(e.name);return t?i.c.getStatusColorClasses(t):"status-neutral"},g=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=e=>{if(!e||!e.name)return u("status.unknown")||"Unknown";let t=i.c.toCaseStatus(e.name);return t?x(t):e.name.replace(/_/g," ")},b=e=>{if(e.has_diagnosis)return u("case.details.withExistingDiagnosis")||"With an existing diagnosis";if(e.description&&e.description.trim())return e.description;if(e.symptoms&&e.symptoms.length>0){let t=e.symptoms[0];if(t.description&&t.description.trim()){let e=t.description.trim();return e.length>100?"".concat(e.substring(0,100),"..."):e}}if(e.case_notes&&e.case_notes.trim()){let t=e.case_notes.trim();return t.length>100?"".concat(t.substring(0,100),"..."):t}return u("case.noDescription")||"No description"},v=e=>{if(!e.appointments||0===e.appointments.length)return null;let t=e.appointments.filter(e=>e.scheduledStart).sort((e,t)=>{let s=e.scheduledStart?new Date(e.scheduledStart).getTime():0;return(t.scheduledStart?new Date(t.scheduledStart).getTime():0)-s});return t.length>0?t[0]:null},j=e=>{if(!e)return"";if(e<60)return"".concat(e," min");let t=Math.floor(e/60),s=e%60;return 0===s?"".concat(t," ").concat(1===t?"hour":"hours"):"".concat(t,"h ").concat(s,"min")},y=e=>{var t,s,a,r,n;return(null===(t=e.customer)||void 0===t?void 0:t.firstName)&&(null===(s=e.customer)||void 0===s?void 0:s.lastName)?"".concat(e.customer.firstName," ").concat(e.customer.lastName):(null===(a=e.customer)||void 0===a?void 0:a.firstName)?e.customer.firstName:(null===(r=e.customer)||void 0===r?void 0:r.lastName)?e.customer.lastName:(null===(n=u("case.details.customerName"))||void 0===n?void 0:n.replace(":",""))||"Customer"};return p?(0,a.jsx)("div",{className:"text-center py-12 ".concat(r),children:(0,a.jsxs)("div",{className:"text-foreground-tertiary",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground-primary mb-2",children:u("common.loading")||"Loading cases..."}),(0,a.jsx)("p",{className:"text-sm text-foreground-secondary",children:u("case.loadingDescription")||"Please wait while we fetch your cases."})]})}):0===t.length?(0,a.jsx)("div",{className:"text-center py-12 ".concat(r),children:(0,a.jsxs)("div",{className:"text-foreground-tertiary",children:[(0,a.jsx)(l.A,{className:"mx-auto h-16 w-16 text-foreground-tertiary mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground-primary mb-2",children:u("case.noCases")||"No cases found"}),(0,a.jsx)("p",{className:"text-sm text-foreground-secondary",children:u("case.noCasesDescription")||"Get started by creating your first case."})]})}):(0,a.jsx)("div",{className:"space-y-4 ".concat(r),children:t.map(e=>(0,a.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-lg p-6 hover:shadow-lg transition-all duration-200 ".concat(s?"cursor-pointer hover:border-border-secondary":""),onClick:()=>{var t;return null==s?void 0:s((null===(t=e.id)||void 0===t?void 0:t.toString())||"")},children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:["arranged"!==m&&(0,a.jsx)("div",{className:"flex items-center space-x-3 mb-3",children:(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center ".concat(h(e.status)),children:f(e.status)})}),"arranged"===m?(0,a.jsxs)(a.Fragment,{children:[(()=>{let t=v(e);return(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-foreground-secondary mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium text-foreground-primary",children:[u("case.details.appointmentArranged.date")||"Appointment Date",":"]})," ",(null==t?void 0:t.scheduledStart)?g(t.scheduledStart):g(e.createdAt||"")]}),(null==t?void 0:t.durationMinutes)&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-foreground-tertiary"}),(0,a.jsxs)("span",{className:"font-medium text-foreground-primary",children:[u("case.details.duration")||"Duration",":"]})," ",j(t.durationMinutes)]})]})})(),(0,a.jsx)("div",{className:"text-base text-foreground-primary font-medium mb-2",children:y(e)})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-base text-foreground-primary font-medium mb-2",children:b(e)}),(e.duration||e.severity)&&(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-foreground-secondary",children:[e.duration&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-foreground-tertiary"}),(0,a.jsxs)("span",{children:[u("case.duration")||"Duration",": ",e.duration]})]}),e.severity&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(c,{className:"w-4 h-4 text-foreground-tertiary"}),(0,a.jsxs)("span",{children:[u("case.severity")||"Severity",": ",e.severity]})]})]})]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 ml-4 text-right",children:"arranged"===m?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center text-foreground-primary ".concat(h(e.status)),children:f(e.status)})})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"text-sm text-foreground-tertiary",children:[(0,a.jsx)("div",{className:"font-medium text-foreground-primary",children:u("case.created")||"Created"}),(0,a.jsx)("div",{className:"text-foreground-tertiary",children:g(e.createdAt||"")})]})})})]})},e.id))})}},6577:(e,t,s)=>{s.d(t,{R:()=>n});var a=s(4848);s(6540);var r=s(98);let n=e=>{let{isOpen:t,onClose:s,onConfirm:n,title:i,message:d,confirmText:l,cancelText:o}=e,{t:c}=(0,r.o)();return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:s}),(0,a.jsxs)("div",{className:"relative bg-background-primary rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground-primary",children:i})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("p",{className:"text-foreground-secondary",children:d})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-foreground-secondary bg-background-secondary border border-border-primary rounded-md hover:bg-background-tertiary transition-colors",children:o||c("case.details.cancel")}),(0,a.jsx)("button",{onClick:()=>{n(),s()},className:"px-4 py-2 text-sm font-medium text-white border border-accent-600 rounded-md bg-accent-500 hover:bg-accent-600 transition-colors",children:l||c("case.details.delete")})]})]})]}):null}},306:(e,t,s)=>{s.d(t,{A:()=>i,h:()=>n});var a=s(4848),r=s(6246);let n=e=>{let{label:t,name:s,register:n,error:i,required:d=!1,tooltip:l,validation:o={},className:c="",currency:m="LEI",placeholder:u,disabled:x=!1}=e;return(0,a.jsxs)("div",{className:"mb-4 ".concat(c),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("label",{className:"block text-base font-medium text-heading mb-2",children:[t,d&&(0,a.jsx)("span",{className:"text-error-500 ml-1",children:"*"})]}),l&&(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("span",{className:"cursor-help text-foreground-tertiary hover:text-foreground-secondary",children:(0,a.jsx)(r.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"absolute z-10 invisible group-hover:visible bg-neutral-900 text-white text-sm rounded p-2 bottom-full mb-1 w-48",children:l})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",min:"0",step:"0.01",placeholder:u,disabled:x,...n(s,{min:{value:0,message:"Amount must be positive"},...o||{}}),className:"w-full input-field [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none disabled:opacity-60 disabled:cursor-not-allowed"}),(0,a.jsxs)("div",{className:"absolute top-2 right-0 flex items-center pr-3",children:[(0,a.jsx)("div",{className:"h-6 border-l border-slate-200 mr-2"}),(0,a.jsx)("span",{className:"h-full text-sm flex justify-center items-center text-slate-700 focus:outline-none",children:m})]})]}),i&&(0,a.jsx)("p",{className:"mt-2 text-sm text-error-600",children:i})]})},i=e=>{let{label:t,name:s,value:n,onChange:i,error:d,required:l=!1,tooltip:o,className:c="",currency:m="LEI",placeholder:u,disabled:x=!1}=e;return(0,a.jsxs)("div",{className:"mb-4 ".concat(c),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("label",{className:"block text-base font-medium text-heading mb-2",children:[t,l&&(0,a.jsx)("span",{className:"text-error-500 ml-1",children:"*"})]}),o&&(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("span",{className:"cursor-help text-foreground-tertiary hover:text-foreground-secondary",children:(0,a.jsx)(r.A,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"absolute z-10 invisible group-hover:visible bg-neutral-900 text-white text-sm rounded p-2 bottom-full mb-1 w-48",children:o})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",min:"0",step:"0.01",placeholder:u,disabled:x,value:n,onChange:i,name:s,className:"w-full input-field [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none disabled:opacity-60 disabled:cursor-not-allowed"}),(0,a.jsxs)("div",{className:"absolute top-2 right-0 flex items-center pr-3",children:[(0,a.jsx)("div",{className:"h-6 border-l border-slate-200 mr-2"}),(0,a.jsx)("span",{className:"h-full text-sm flex justify-center items-center text-slate-700 focus:outline-none",children:m})]})]}),d&&(0,a.jsx)("p",{className:"mt-2 text-sm text-error-600",children:d})]})}},5182:(e,t,s)=>{s.d(t,{O:()=>l});var a=s(4848),r=s(6540),n=s(6715),i=s(6578),d=s(98);let l=e=>{let{children:t}=e,{isAuthenticated:s,loading:l}=(0,i.A)(),o=(0,n.useRouter)(),{t:c}=(0,d.o)();return((0,r.useEffect)(()=>{l||s||o.push("/auth/login")},[s,l,o]),l)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background-secondary",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-body",children:c("common.loading")})]})}):s?(0,a.jsx)(a.Fragment,{children:t}):null}},861:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(6540);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},8283:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(6540);let r=a.forwardRef(function(e,t){let{title:s,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})}}]);
//# sourceMappingURL=747-50470073b22ad458.js.map