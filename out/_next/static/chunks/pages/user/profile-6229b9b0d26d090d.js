(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{1254:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/profile",function(){return t(3882)}])},9970:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(4848);t(6540);let a=e=>{let{title:r,subtitle:t,menuItems:a,activeSection:i,onSectionChange:n,children:l}=e;return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsxs)("div",{className:"hidden md:flex max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"w-64 min-h-screen shadow-lg border-r border-border-primary",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-border-primary mt-4",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-foreground-primary",children:r}),(0,s.jsx)("p",{className:"text-sm text-foreground-secondary mt-1",children:t})]}),(0,s.jsx)("nav",{className:"mt-4",children:(0,s.jsx)("ul",{children:a.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:()=>n(e.id),className:"w-full text-left px-6 py-3 transition-colors duration-200 ".concat(i===e.id?"bg-primary-50 text-primary-600 border-r-4 border-primary-600":"text-foreground-secondary hover:bg-background-secondary"),children:e.label})},e.id))})})]}),(0,s.jsx)("div",{className:"flex-1 bg-background-primary shadow-lg m-8 rounded-xl border border-border-primary",children:l})]}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)("div",{className:"bg-background-primary mx-4 my-4 rounded-lg shadow-sm border border-border-primary",children:l})})]})}},3882:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>S});var s=t(4848),a=t(6540),i=t(9785),n=t(311),l=t(2765),o=t(3722),d=t(98),c=t(6578);let m=e=>{let{onSave:r}=e,{t}=(0,d.o)(),{user:m,updateUser:u}=(0,c.A)(),{register:x,handleSubmit:f,formState:{errors:h},reset:p}=(0,i.mN)({defaultValues:m?{...m,day:m.dateOfBirth?new Date(m.dateOfBirth).getDate():void 0,month:m.dateOfBirth?new Date(m.dateOfBirth).getMonth()+1:void 0,year:m.dateOfBirth?new Date(m.dateOfBirth).getFullYear():void 0}:{id:"",firstName:"",lastName:"",createdAt:new Date,updatedAt:new Date,address:void 0,cnp:"",day:void 0,month:void 0,year:void 0}});a.useEffect(()=>{m&&p({...m,day:m.dateOfBirth?new Date(m.dateOfBirth).getDate():void 0,month:m.dateOfBirth?new Date(m.dateOfBirth).getMonth()+1:void 0,year:m.dateOfBirth?new Date(m.dateOfBirth).getFullYear():void 0})},[m,p]);let b=async e=>{var t;let s={...e};if(e.day&&e.month&&e.year&&(s.dateOfBirth=new Date(Date.UTC(e.year,e.month-1,e.day))),e.height&&(s.height="string"==typeof e.height?parseFloat(e.height):e.height),e.weight&&(s.weight="string"==typeof e.weight?parseFloat(e.weight):e.weight),s.cnp=(null===(t=e.cnp)||void 0===t?void 0:t.trim())||"",delete s.day,delete s.month,delete s.year,e.address){let{county:r,city:t,postalCode:a,street:i,houseNumber:n}=e.address;r&&t&&a&&i&&n?s.address={...e.address,country:e.address.country||null,block:e.address.block||null,entranceNumber:e.address.entranceNumber||null,floor:e.address.floor||null,apartmentNumber:e.address.apartmentNumber||null}:delete s.address}r?r(s):await u(s)};if(m)return(0,s.jsxs)("div",{className:"p-4 md:p-6",children:[(0,s.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 text-foreground-primary",children:t("profile.personalInformation")||"Personal Information"}),(0,s.jsxs)("form",{onSubmit:f(b),className:"space-y-4 md:space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,s.jsx)("h3",{className:"text-base md:text-lg font-semibold text-foreground-primary",children:"Personal Details"}),(0,s.jsx)(n.d,{register:x,errors:h})]}),(0,s.jsx)("div",{className:"space-y-3 md:space-y-4",children:(0,s.jsx)(l.X,{register:x,errors:h})}),(0,s.jsx)("div",{className:"space-y-3 md:space-y-4",children:(0,s.jsx)(o.g,{register:x,errors:h})}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-border-primary",children:(0,s.jsx)("button",{type:"submit",className:"w-full md:w-auto bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 md:py-2 rounded-lg font-semibold transition-colors text-base",children:t("profile.save")||"Save Changes"})})]})]})};var u=t(6715),x=t(1023),f=t(2858),h=t(7415),p=t(476),b=t(9868),y=t(8510);let g=a.forwardRef(function(e,r){let{title:t,titleId:s,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},i),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))});var v=t(9389);let j=a.memo(()=>{let{t:e}=(0,d.o)(),{isAuthenticated:r}=(0,c.A)(),{addNotification:t}=(0,x.E)(),i=(0,u.useRouter)(),[n,l]=(0,a.useState)([]),[o,m]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(0),[S,C]=(0,a.useState)(null),[O,E]=(0,a.useState)(!1),B=(0,a.useRef)(!1),D=(0,a.useRef)(!1),A=(0,a.useRef)(null),M=(0,a.useCallback)(async function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=Math.random().toString(36).substring(7);if(!D.current){if(D.current=!0,A.current=s,N(!0),r&&w>=3){let r=e("case.maxRetriesReached")||"Maximum retry attempts reached";m(r),t("error",r,5e3),N(!1),D.current=!1,A.current=null;return}try{m(null);let e=await b.k.getInstance().getAllCases();A.current===s&&(l((null==e?void 0:e.cases)||[]),B.current=!0,k(0))}catch(i){let a=e("case.fetchError")||"Failed to load cases";A.current===s&&(r&&k(e=>e+1),m(a),t("error",a,5e3))}finally{A.current===s&&(N(!1),D.current=!1,A.current=null)}}},[e,t,w]),_=(0,a.useCallback)(()=>{B.current=!1,k(0),M(!0)},[M]);if((0,a.useEffect)(()=>(r&&!B.current&&M(!1),()=>{A.current=null,D.current=!1}),[r,M]),o){let r=w>=3;return(0,s.jsx)("div",{className:"min-h-[400px] flex items-center justify-center px-6 py-12",children:(0,s.jsx)("div",{className:"max-w-md w-full text-center",children:(0,s.jsxs)("div",{className:"bg-background-primary rounded-xl shadow-lg p-8 border border-border-primary",children:[(0,s.jsxs)("div",{className:"text-error-500 mb-6",children:[(0,s.jsx)(y.A,{className:"mx-auto h-16 w-16 text-error-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground-primary mb-2",children:e("case.errorTitle")||"Error loading cases"}),(0,s.jsx)("p",{className:"text-sm text-foreground-secondary mb-4",children:o}),w>0&&(0,s.jsx)("p",{className:"text-xs text-foreground-tertiary mb-4",children:e("case.retryAttempts")||"Retry attempts: ".concat(w,"/").concat(3)})]}),!r&&(0,s.jsx)("button",{onClick:_,disabled:j,className:"w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md",children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white"}),e("common.loading")||"Loading..."]}):e("common.retry")||"Retry"}),r&&(0,s.jsx)("div",{className:"bg-background-secondary rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-foreground-secondary",children:e("case.maxRetriesMessage")||"Maximum retry attempts reached. Please try again later."})})]})})})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-8 px-6 py-8",children:[(0,s.jsx)("div",{className:"bg-background-primary rounded-xl shadow-sm border border-border-primary p-8",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-foreground-primary mb-3",children:e("case.overview.title")||"My Cases"}),(0,s.jsx)("p",{className:"text-base text-foreground-secondary leading-relaxed",children:e("case.overview.description")||"View and manage your medical cases"})]}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsxs)("button",{onClick:()=>{i.push("/case/create")},className:"inline-flex items-center px-6 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-600 transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105",children:[(0,s.jsx)(v.A,{className:"w-5 h-5 mr-3"}),e("case.create")||"Create New Case"]})})]})}),(0,s.jsx)("div",{className:"bg-background-primary rounded-xl shadow-sm border border-border-primary overflow-hidden",children:(0,s.jsx)(f.A,{cases:n,onCaseClick:e=>{let r=n.find(r=>{var t;return(null===(t=r.id)||void 0===t?void 0:t.toString())===e});r&&(C(r),E(!0))},className:"p-6"})})]}),(0,s.jsx)(p.A,{isOpen:O,onClose:()=>{E(!1),C(null)},title:S?"Case ".concat(S.id):"",size:"xl",children:S&&(0,s.jsx)(h.l,{caseData:S,onUpdated:e=>{C(e),l(r=>{let t=e.id;if(null==t)return r;let s=r.findIndex(e=>String(e.id||"")===String(t));if(-1===s)return[e,...r];let a=r.slice();return a[s]=e,a})}})})]})});j.displayName="CaseOverview";var N=t(9970);let w=e=>{let{initialSection:r="cases"}=e,{t}=(0,d.o)(),{userGroups:i}=(0,c.A)(),n=(0,a.useMemo)(()=>i.includes("patient"),[i]),l=(0,a.useMemo)(()=>[...n?[{id:"cases",label:t("case.overview.title")||"My Cases"}]:[],{id:"personal",label:t("profile.personalInfo")||"Personal Information"},{id:"security",label:t("profile.security")||"Security Settings"},{id:"preferences",label:t("profile.preferences")||"Preferences"},{id:"notifications",label:t("profile.notifications")||"Notifications"}],[t,n]),[o,u]=(0,a.useState)(r);return(0,a.useEffect)(()=>{let e=["personal","security","preferences","notifications",...n?["cases"]:[]];r&&e.includes(r)?u(r):"cases"!==r||n||u("personal")},[r,n]),(0,a.useEffect)(()=>{n||"cases"!==o||u("personal")},[n,o]),(0,s.jsx)(N.A,{title:t("profile.title"),subtitle:t("profile.subtitle"),menuItems:l,activeSection:o,onSectionChange:u,children:(()=>{switch(o){case"cases":return(0,s.jsx)(j,{},"case-overview");case"personal":return(0,s.jsx)(m,{});case"security":return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-foreground-primary",children:t("profile.security")||"Security Settings"}),(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-foreground-secondary",children:t("profile.securityComingSoon")||"Security settings will be available soon"})})]});case"preferences":return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-foreground-primary",children:t("profile.preferences")||"Preferences"}),(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-foreground-secondary",children:t("profile.preferencesComingSoon")||"Preferences will be available soon"})})]});case"notifications":return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-foreground-primary",children:t("profile.notifications")||"Notifications"}),(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-foreground-secondary",children:t("profile.notificationsComingSoon")||"Notification settings will be available soon"})})]});default:return n?(0,s.jsx)(j,{},"case-overview-default"):(0,s.jsx)(m,{})}})()})};var k=t(5182);function S(){let{section:e}=(0,u.useRouter)().query;return(0,a.useEffect)(()=>{},[e]),(0,s.jsx)(k.O,{children:(0,s.jsx)(w,{initialSection:e})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[785,568,747,294,636,593,792],()=>r(1254)),_N_E=e.O()}]);
//# sourceMappingURL=profile-6229b9b0d26d090d.js.map