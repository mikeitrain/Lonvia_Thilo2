(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[694],{3968:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/doctor/panel",function(){return a(7207)}])},815:(e,t,a)=>{"use strict";a.d(t,{D:()=>i});var r=a(4848),n=a(6540),s=a(6715),l=a(98),d=a(548),o=a(5182);let i=e=>{let{children:t}=e,a=(0,s.useRouter)(),{t:i}=(0,l.o)(),[c,g]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{try{var e,t;let r=await (0,d.$)(),n=null===(t=r.tokens)||void 0===t?void 0:null===(e=t.idToken)||void 0===e?void 0:e.payload;if(!((null==n?void 0:n["cognito:groups"])||[]).includes("doctor")){a.replace("/user/profile");return}}finally{g(!1)}})()},[a]),(0,r.jsx)(o.O,{children:c?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background-secondary",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-body",children:i("common.loading")})]})}):(0,r.jsx)(r.Fragment,{children:t})})}},7207:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(4848),n=a(6540),s=a(815),l=a(98),d=a(9868),o=a(2858);let i=e=>{let{cases:t,onCaseClick:a}=e,{language:s,t:d}=(0,l.o)(),[i,c]=(0,n.useState)(new Date),[g,u]=(0,n.useState)((()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())})()),m=(()=>{let e=new Set;return t.forEach(t=>{var a;null===(a=t.appointments)||void 0===a||a.forEach(t=>{if(t.scheduledStart&&"accepted"===t.meetingStatus){let a=new Date(t.scheduledStart);e.add(a.toDateString())}})}),Array.from(e).map(e=>new Date(e))})(),h=e=>m.some(t=>t.toDateString()===e.toDateString()),x=()=>{let e=new Date(i.getFullYear(),i.getMonth(),1);return 0===e.getDay()?6:e.getDay()-1},p=()=>new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),b=e=>{let t=new Date;return e.toDateString()===t.toDateString()},j=e=>g&&e.toDateString()===g.toDateString(),v=e=>{u(e)},w=g?(e=>{let a=[],r=new Set;return t.forEach(t=>{var n;(null===(n=t.appointments)||void 0===n?void 0:n.some(t=>!!t.scheduledStart&&"accepted"===t.meetingStatus&&new Date(t.scheduledStart).toDateString()===e.toDateString()))&&t.id&&!r.has(t.id)&&(r.add(t.id),a.push(t))}),a})(g):[];return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:d("calendar.title")||"Calendar"}),(0,r.jsxs)("div",{className:"items-center gap-4 p-3 border border-gray-300 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>{c(new Date(i.getFullYear(),i.getMonth()-1))},className:"p-2 hover:bg-gray-100 rounded",children:"<"}),(0,r.jsx)("span",{className:"text-lg font-medium",children:i.toLocaleDateString("ro"===s?"ro-RO":"de"===s?"de-DE":"en-GB",{month:"long",year:"numeric"})}),(0,r.jsx)("button",{onClick:()=>{c(new Date(i.getFullYear(),i.getMonth()+1))},className:"p-2 hover:bg-gray-100 rounded",children:">"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[(()=>{let e="ro"===s?"ro-RO":"de"===s?"de-DE":"en-GB",t=[],a=new Date(2024,0,1);for(let r=0;r<7;r++){let n=new Date(a);n.setDate(a.getDate()+r);let s=n.toLocaleDateString(e,{weekday:"short"});t.push(s.substring(0,2).toUpperCase())}return t})().map((e,t)=>(0,r.jsx)("div",{className:"text-center text-sm font-medium text-gray-600 py-2",children:e},t)),(()=>{let e=[],t=x(),a=p(),r=new Date(i.getFullYear(),i.getMonth()-1,0).getDate();for(let a=t-1;a>=0;a--)e.push({date:r-a,isCurrentMonth:!1,dateObj:new Date(i.getFullYear(),i.getMonth()-1,r-a)});for(let t=1;t<=a;t++)e.push({date:t,isCurrentMonth:!0,dateObj:new Date(i.getFullYear(),i.getMonth(),t)});let n=42-e.length;for(let t=1;t<=n;t++)e.push({date:t,isCurrentMonth:!1,dateObj:new Date(i.getFullYear(),i.getMonth()+1,t)});return e})().map((e,t)=>{let a=h(e.dateObj),n=b(e.dateObj),s=j(e.dateObj),l="",d="";return s?(l="bg-blue-200",d="border-blue-400"):n?(l="bg-gray-200",d="border-gray-400"):a&&(l="bg-green-200",d="border-green-400"),(0,r.jsx)("button",{onClick:()=>v(e.dateObj),className:"\n                  h-10 w-full rounded-md text-sm transition-colors cursor-pointer\n                  ".concat(e.isCurrentMonth?"text-gray-800":"text-gray-400","\n                  ").concat(s?"hover:bg-blue-100":a&&!n?"hover:bg-green-100":"hover:bg-gray-50","\n                  ").concat(l," ").concat(d," border\n                  ").concat(n||s||a?"font-semibold":"","\n                "),children:e.date},t)})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border border-blue-400 bg-blue-200"}),(0,r.jsx)("span",{className:"text-gray-700",children:d("calendar.legend.selected")||"Selected Date"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border border-gray-400 bg-gray-200"}),(0,r.jsx)("span",{className:"text-gray-700",children:d("calendar.legend.today")||"Today"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded border border-green-400 bg-green-200"}),(0,r.jsx)("span",{className:"text-gray-700",children:d("calendar.legend.hasAppointments")||"Has Appointments"})]})]}),g&&(0,r.jsx)("div",{className:"mt-4",children:w.length>0?(0,r.jsx)(o.A,{cases:w,onCaseClick:a,viewMode:"arranged"}):(0,r.jsxs)("div",{className:"text-center text-gray-500 py-4",children:[d("calendar.noAppointments")||"No appointments scheduled for"," ",g.toLocaleDateString("ro"===s?"ro-RO":"de"===s?"de-DE":"en-GB",{month:"long",day:"numeric",year:"numeric"})]})})]})})};var c=a(7415),g=a(476);let u=()=>{let{t:e}=(0,l.o)(),t=d.k.getInstance(),[a,s]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[h,x]=(0,n.useState)(null),[p,b]=(0,n.useState)(!1),j=n.useCallback(async()=>{m(!0),s((await t.getWorkInProcessCases()).cases||[]),m(!1)},[t]);(0,n.useEffect)(()=>{j()},[j]);let v=e=>{let t=a.find(t=>{var a;return(null===(a=t.id)||void 0===a?void 0:a.toString())===e});t&&(x(t),b(!0))},w=(()=>{let e=new Date;e.setHours(0,0,0,0);let t=new Date(e);t.setDate(t.getDate()+1);let r=[];return a.forEach(a=>{var n;(null===(n=a.appointments)||void 0===n?void 0:n.some(a=>{if(a.scheduledStart&&"accepted"===a.meetingStatus){let r=new Date(a.scheduledStart);return r>=e&&r<t}return!1}))&&r.push(a)}),r})(),D=(()=>{let e=new Date,t=[];return a.forEach(a=>{var r;(null===(r=a.appointments)||void 0===r?void 0:r.some(t=>!!t.scheduledStart&&"accepted"===t.meetingStatus&&new Date(t.scheduledStart)>=e))&&t.push(a)}),t})();return u?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"text-gray-600",children:e("common.loading")||"Loading..."})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(i,{cases:a,onCaseClick:v}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today"}),(0,r.jsx)(o.A,{cases:w,onCaseClick:v,viewMode:"arranged"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Next Meetings"}),(0,r.jsx)(o.A,{cases:D,onCaseClick:v,viewMode:"arranged"})]}),(0,r.jsx)(g.A,{isOpen:p,onClose:()=>{b(!1),x(null)},title:h?"Case ".concat(h.id):"",size:"xl",children:h&&(0,r.jsx)(c.l,{caseData:h,onUpdated:e=>{x(e),s(t=>{let a=e.id;if(null==a)return t;let r=t.findIndex(e=>String(e.id||"")===String(a));if(-1===r)return[e,...t];let n=t.slice();return n[r]=e,n})}})})]})},m=()=>(0,r.jsx)(s.D,{children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Upcoming Meetings"}),(0,r.jsx)(u,{})]})})}},e=>{var t=t=>e(e.s=t);e.O(0,[785,568,747,636,593,792],()=>t(3968)),_N_E=e.O()}]);
//# sourceMappingURL=panel-8dd9933ddace9ce7.js.map