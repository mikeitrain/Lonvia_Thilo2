(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{2212:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/panel",function(){return s(7405)}])},3395:(e,r,s)=>{"use strict";s.d(r,{h:()=>o});var n=s(4848),a=s(6540),d=s(6715),i=s(98),l=s(548),t=s(5182);let o=e=>{let{children:r}=e,s=(0,d.useRouter)(),{t:o}=(0,i.o)(),[c,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{var e,r;let n=await (0,l.$)(),a=null===(r=n.tokens)||void 0===r?void 0:null===(e=r.idToken)||void 0===e?void 0:e.payload;if(!((null==a?void 0:a["cognito:groups"])||[]).includes("admin")){s.replace("/user/profile");return}}finally{m(!1)}})()},[s]),(0,n.jsx)(t.O,{children:c?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background-secondary",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-body",children:o("common.loading")})]})}):(0,n.jsx)(n.Fragment,{children:r})})}},7405:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>b});var n=s(4848),a=s(6540),d=s(3395),i=s(2858),l=s(476),t=s(7415),o=s(9868),c=s(408),m=s(98),u=s(3725);function b(){let{t:e}=(0,m.o)(),[r,s]=(0,a.useState)([]),[b,x]=(0,a.useState)([]),[p,g]=(0,a.useState)(null),[h,y]=(0,a.useState)(null),[N,f]=(0,a.useState)(null),[j,v]=(0,a.useState)(null),[S,k]=(0,a.useState)(!0),[C,w]=(0,a.useState)(null),[E,I]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{let e=o.k.getInstance(),[r,n,a]=await Promise.all([e.getWorkInProcessCases(),e.getWaitingForUserCases(),e.getAllDoctors({isActive:!0})]);s(r.cases||[]),x(n.cases||[]),I(a.doctors||[])}finally{k(!1)}})()},[]);let A=async(e,r)=>{let s=o.k.getInstance();r((await s.getCasesByStatus([e])).cases||[])},_=(e,r)=>{let s=r.id;if(null==s)return e;let n=e.findIndex(e=>String(e.id||"")===String(s));if(-1===n)return[r,...e];let a=e.slice();return a[n]=r,a},T=(e,r)=>e.filter(e=>String(e.id||"")!==String(r.id||"")),D=e=>{switch(e){case c.y.NEW:case c.y.PAID:return"workInProcess";case c.y.OFFER_SENT:case c.y.WAITING_FOR_PAYMENT:case c.y.TIMESLOTS_SENT:return"waitingForUser";case c.y.ARRANGED:return"arranged";case c.y.IN_CONSULTATION:return"inConsultation";case c.y.DECLINED:return"declined";case c.y.FINISHED:return"finished";default:return null}};return S?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center"}):(0,n.jsxs)(d.h,{children:[(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:e("admin.panel.title")}),(0,n.jsxs)("section",{className:"bg-background-secondary border border-border-primary rounded-lg shadow-sm p-5",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-3",children:e("admin.panel.workInProcess")}),(0,n.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-md p-4",children:(0,n.jsx)(i.A,{cases:r,onCaseClick:e=>{let s=r.find(r=>String(r.id||"")===String(e));s&&w(s)}})})]}),(0,n.jsxs)("section",{className:"bg-background-secondary border border-border-primary rounded-lg shadow-sm p-5",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-3",children:e("admin.panel.waitingForUser")}),(0,n.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-md p-4",children:(0,n.jsx)(i.A,{cases:b,onCaseClick:e=>{let r=b.find(r=>String(r.id||"")===String(e));r&&w(r)}})})]}),(0,n.jsxs)("section",{className:"bg-background-secondary border border-border-primary rounded-lg shadow-sm p-5",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("admin.panel.arranged")}),null===p?(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{className:"bg-primary-600 text-white px-5 py-2 rounded-md font-medium hover:bg-primary-700",onClick:()=>A(c.y.ARRANGED,e=>g(e)),children:e("admin.panel.loadCases")})}):(0,n.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-md p-4",children:(0,n.jsx)(i.A,{cases:p,onCaseClick:e=>{let r=null==p?void 0:p.find(r=>String(r.id||"")===String(e));r&&w(r)}})})]}),(0,n.jsxs)("section",{className:"bg-background-secondary border border-border-primary rounded-lg shadow-sm p-5",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("admin.panel.inConsultation")}),null===h?(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{className:"bg-primary-600 text-white px-5 py-2 rounded-md font-medium hover:bg-primary-700",onClick:()=>A(c.y.IN_CONSULTATION,e=>y(e)),children:e("admin.panel.loadCases")})}):(0,n.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-md p-4",children:(0,n.jsx)(i.A,{cases:h,onCaseClick:e=>{let r=null==h?void 0:h.find(r=>String(r.id||"")===String(e));r&&w(r)}})})]}),(0,n.jsxs)("section",{className:"bg-background-secondary border border-border-primary rounded-lg shadow-sm p-5",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("admin.panel.declined")}),null===N?(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{className:"bg-primary-600 text-white px-5 py-2 rounded-md font-medium hover:bg-primary-700",onClick:()=>A(c.y.DECLINED,e=>f(e)),children:e("admin.panel.loadCases")})}):(0,n.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-md p-4",children:(0,n.jsx)(i.A,{cases:N,onCaseClick:e=>{let r=null==N?void 0:N.find(r=>String(r.id||"")===String(e));r&&w(r)}})})]}),(0,n.jsxs)("section",{className:"bg-background-secondary border border-border-primary rounded-lg shadow-sm p-5",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e("admin.panel.finished")}),null===j?(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("button",{className:"bg-primary-600 text-white px-5 py-2 rounded-md font-medium hover:bg-primary-700",onClick:()=>A(c.y.FINISHED,e=>v(e)),children:e("admin.panel.loadCases")})}):(0,n.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-md p-4",children:(0,n.jsx)(i.A,{cases:j,onCaseClick:e=>{let r=null==j?void 0:j.find(r=>String(r.id||"")===String(e));r&&w(r)}})})]})]}),(0,n.jsx)(l.A,{isOpen:null!==C,onClose:()=>w(null),size:"xl",title:C?"".concat(e("case.overview.title")," #").concat(C.id):void 0,children:C?(0,n.jsx)(t.l,{caseData:C,doctors:E,onUpdated:e=>{var r;w(e);let n=D(u.c.toCaseStatus((null===(r=e.status)||void 0===r?void 0:r.name)||""));s(r=>T(r,e)),x(r=>T(r,e)),g(r=>r?T(r,e):r),y(r=>r?T(r,e):r),f(r=>r?T(r,e):r),v(r=>r?T(r,e):r),"workInProcess"===n?s(r=>_(r,e)):"waitingForUser"===n?x(r=>_(r,e)):"arranged"===n?g(r=>r?_(r,e):r):"inConsultation"===n?y(r=>r?_(r,e):r):"declined"===n?f(r=>r?_(r,e):r):"finished"===n&&v(r=>r?_(r,e):r)}}):null})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[785,568,747,636,593,792],()=>r(2212)),_N_E=e.O()}]);
//# sourceMappingURL=panel-2d66a191664202a6.js.map