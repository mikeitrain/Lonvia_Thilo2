{"version":3,"file":"static/chunks/747-50470073b22ad458.js","mappings":"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","sources":["webpack://_N_E/./src/lib/documentUtils.ts","webpack://_N_E/./src/components/status/status-flow-modal.tsx","webpack://_N_E/./src/components/case/case-details-admin.tsx","webpack://_N_E/./src/components/case/case-workflow-info.tsx","webpack://_N_E/./node_modules/@heroicons/react/24/outline/esm/ArrowDownTrayIcon.js","webpack://_N_E/./node_modules/@heroicons/react/24/outline/esm/CalendarDaysIcon.js","webpack://_N_E/./node_modules/@heroicons/react/24/outline/esm/LinkIcon.js","webpack://_N_E/./src/components/case/case-details.tsx","webpack://_N_E/./node_modules/@heroicons/react/24/outline/esm/BoltIcon.js","webpack://_N_E/./src/components/case/case-list.tsx","webpack://_N_E/./src/components/common/ConfirmationModal.tsx","webpack://_N_E/./src/components/common/CurrencyInputField.tsx","webpack://_N_E/./src/components/common/ProtectedRoute.tsx","webpack://_N_E/./node_modules/@heroicons/react/24/outline/esm/ClockIcon.js","webpack://_N_E/./node_modules/@heroicons/react/24/outline/esm/DocumentTextIcon.js"],"sourcesContent":["export type TranslateFn = (key: string) => string;\n\nfunction capitalizeFirstLetter(input: string): string {\n  if (!input) return '';\n  return input.charAt(0).toUpperCase() + input.slice(1).toLowerCase();\n}\n\n/**\n * Translate a backend document type into a localized label using i18n.\n * Known types: offer, invoice. Falls back to a humanized value.\n */\nexport function translateDocumentType(docType: string | undefined | null, t: TranslateFn): string {\n  if (!docType) return '';\n  const normalized = String(docType).trim().toLowerCase();\n  switch (normalized) {\n    case 'offer':\n      return t('documents.offer') || 'Offer';\n    case 'invoice':\n      return t('documents.invoice') || 'Invoice';\n    default:\n      return capitalizeFirstLetter(normalized);\n  }\n}\n\n\n","'use client';\n\nimport React, { useMemo } from 'react';\nimport Modal from '@/components/common/Modal';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { CaseStatus, CASE_STATUS } from '@/types/status';\n\ninterface StatusFlowModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  currentStatus?: CaseStatus | null;\n}\n\n// Use shared transition map from StatusUtils\nconst getValidTransitions = (status: CaseStatus): CaseStatus[] => StatusUtils.getValidTransitions(status);\n\nexport const StatusFlowModal: React.FC<StatusFlowModalProps> = ({ isOpen, onClose, currentStatus }) => {\n  const { t } = useLanguage();\n  // Explicit lifecycle order (memoized to keep a stable reference)\n  const statusesInOrder: CaseStatus[] = useMemo(() => [\n    CASE_STATUS.NEW,\n    CASE_STATUS.OFFER_SENT,\n    CASE_STATUS.WAITING_FOR_PAYMENT,\n    CASE_STATUS.PAID,\n    CASE_STATUS.TIMESLOTS_SENT,\n    CASE_STATUS.ARRANGED,\n    CASE_STATUS.IN_CONSULTATION,\n    CASE_STATUS.FINISHED,\n    CASE_STATUS.DECLINED,\n  ], []);\n\n  const allowedNext = currentStatus ? getValidTransitions(currentStatus) : [];\n\n  // Compute a unified badge width based on the widest translated label\n  const badgeWidth = useMemo(() => {\n    const labels = statusesInOrder.map((s) => t(StatusUtils.statusToTranslationKey(s)));\n    if (typeof window === 'undefined') {\n      // Fallback approximation for SSR (won't be used in client-only modal)\n      const maxChars = Math.max(...labels.map((l) => l.length));\n      return Math.ceil(maxChars * 8 + 24); // ~8px per char + padding\n    }\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return 0;\n    // font-medium ~ 500 weight, text-sm ~ 14px\n    ctx.font = '500 14px system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif';\n    let max = 0;\n    for (const label of labels) {\n      const w = ctx.measureText(label).width;\n      if (w > max) max = w;\n    }\n    // Add horizontal padding used by the pill (px-3 => ~24px total)\n    return Math.ceil(max + 24);\n  }, [t, statusesInOrder]);\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} size=\"lg\" title={t('status.flowTitle') || 'Status flow'}>\n      <div className=\"p-6 space-y-6\">\n        <div className=\"text-sm text-foreground-secondary\">{t('status.setByAdmin')}</div>\n\n        {/* Overview of all statuses in lifecycle order as a vertical stepper timeline */}\n        <div>\n          <div className=\"text-sm text-foreground-secondary mb-3\">{t('status.flowOverview') || 'Overview of statuses and their meaning:'}</div>\n          <ol className=\"grid gap-3 m-0 p-0 list-none\">\n            {statusesInOrder.map((s) => {\n              const info = StatusUtils.getStatusInfo(s);\n              const colorClass = StatusUtils.getStatusColorClasses(s);\n              const isCurrent = currentStatus === s;\n              const isNext = allowedNext.includes(s);\n              return (\n                <li key={s} className=\"grid grid-cols-[24px_1fr] gap-3 items-stretch relative\">\n                  {/* Rail */}\n                  <div className=\"relative flex items-stretch justify-center\">\n                    {/* vertical line spanning full item height */}\n                    <div className=\"absolute left-1/2 -translate-x-1/2 top-0 bottom-0 w-0.5 bg-border-primary\" />\n                    {/* centered dot */}\n                    <div className={`absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full ${isCurrent ? 'bg-primary-600 ring-4 ring-primary-600/20' : 'bg-foreground-tertiary ring-4 ring-white'}`} />\n                  </div>\n                  {/* Card */}\n                  <div className={`w-full min-h-[72px] bg-background-primary border border-border-primary rounded-xl shadow-sm p-4 ${isNext ? 'ring-1 ring-primary-600/50' : ''}`}>\n                    <div className=\"flex items-center gap-4\">\n                      <span\n                        className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shrink-0 justify-center ${colorClass}`}\n                        style={{ width: badgeWidth ? `${badgeWidth}px` : undefined }}\n                      >\n                        {t(StatusUtils.statusToTranslationKey(s))}\n                      </span>\n                      <span className=\"text-sm text-foreground-secondary\">\n                        {t(`status.flow.${s.toLowerCase()}`) || info.description}\n                      </span>\n                    </div>\n                  </div>\n                </li>\n              );\n            })}\n          </ol>\n        </div>\n\n        {/* Allowed transitions from current status */}\n        {/* Note: allowed transitions are emphasized inline by ring on target statuses */}\n      </div>\n    </Modal>\n  );\n};\n\nexport default StatusFlowModal;\n\n\n","import React, { useEffect, useState } from 'react';\nimport Divider from '@/components/common/Divider';\nimport { CurrencyInputFieldControlled } from '@/components/common/CurrencyInputField';\nimport { ExclamationTriangleIcon } from '@heroicons/react/24/outline';\nimport { Case } from '@/types/case';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { CaseStatus, CASE_STATUS } from '@/types/status';\nimport { HttpService } from '@/services/httpService';\nimport { fetchAuthSession } from 'aws-amplify/auth';\nimport { DoctorProfile } from '@/types/doctor';\nimport { formatDate, formatTime } from '@/lib/utils';\n\ninterface CaseDetailsAdminProps {\n    caseData: Case;\n    onCaseUpdated?: (updated: Case) => void;\n    doctors?: DoctorProfile[];\n}\n\nconst CaseDetailsAdmin: React.FC<CaseDetailsAdminProps> = ({ caseData, onCaseUpdated, doctors = [] }) => {\n    const { t, translateStatus, language } = useLanguage();\n    const [adminNotes, setAdminNotes] = useState<string>(caseData.admin_notes || '');\n    const [nextStatus, setNextStatus] = useState<string>('');\n    const [appointmentDate1, setAppointmentDate1] = useState<string>('');\n    const [appointmentDate2, setAppointmentDate2] = useState<string>('');\n    const [appointmentDuration, setAppointmentDuration] = useState<number>(30);\n    const [appointmentError, setAppointmentError] = useState<string>('');\n    const [selectedDoctorId, setSelectedDoctorId] = useState<number | ''>('');\n\n    // Calculate minimum date (2 days from now) for appointment selection\n    const getMinAppointmentDate = () => {\n        const now = new Date();\n        const twoDaysFromNow = new Date(now.getTime() + (2 * 24 * 60 * 60 * 1000));\n        return twoDaysFromNow.toISOString().slice(0, 16); // Format for datetime-local input\n    };\n    const [isAdmin, setIsAdmin] = useState<boolean>(false);\n    const [offerAmount, setOfferAmount] = useState<string>('');\n    const [offerText, setOfferText] = useState<string>('');\n\n    useEffect(() => {\n        let mounted = true;\n        (async () => {\n            try {\n                const session = await fetchAuthSession();\n                const idPayload = session.tokens?.idToken?.payload as Record<string, unknown> | undefined;\n                const groups = (idPayload?.['cognito:groups'] as string[] | undefined) || [];\n                if (mounted) setIsAdmin(groups.includes('admin'));\n            } catch {\n                if (mounted) setIsAdmin(false);\n            }\n        })();\n        return () => { mounted = false; };\n    }, []);\n\n    const currentStatus = StatusUtils.toCaseStatus(caseData.status?.name || '');\n    const validNextStatuses: CaseStatus[] = currentStatus ? StatusUtils.getValidTransitions(currentStatus as CaseStatus) : [];\n\n    // Row enablement based on status\n    const canEditNotes = currentStatus ? StatusUtils.isActiveStatus(currentStatus as CaseStatus) : false;\n    const canSendOffer = currentStatus === CASE_STATUS.NEW;\n    const canMarkPaid = currentStatus === CASE_STATUS.WAITING_FOR_PAYMENT;\n    const canSetAppointment = currentStatus === CASE_STATUS.PAID;\n\n    useEffect(() => {\n        setAdminNotes(caseData.admin_notes || '');\n    }, [caseData.id, caseData.admin_notes]);\n\n    const handleSaveNotes = async () => {\n        if (!caseData.id) return;\n        const http = HttpService.getInstance();\n        const payload: Partial<Case> = {};\n        payload.admin_notes = adminNotes;\n        const updated = await http.updateCase(String(caseData.id), payload as Case);\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n    const handleSetStatus = async () => {\n        if (!caseData.id || !nextStatus) return;\n        const http = HttpService.getInstance();\n        const payload: Partial<Case> = {};\n        const statusPayload = { id: 0 as number, name: nextStatus as CaseStatus } as unknown as NonNullable<Case['status']>;\n        payload.status = statusPayload;\n        const updated = await http.updateCase(String(caseData.id), payload as Case);\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n\n    const handleSendOffer = async () => {\n        if (!caseData.id) return;\n        const http = HttpService.getInstance();\n        const amount = Number(offerAmount);\n        if (!offerText || !amount || amount <= 0) return;\n        const updated = await http.sendOffer({ caseId: String(caseData.id) }, { text: offerText, amount_gross: amount });\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n    const handleMarkInvoicePaid = async () => {\n        if (!caseData.id) return;\n        const http = HttpService.getInstance();\n        const updated = await http.markInvoicePaid({ caseId: String(caseData.id) });\n        if (onCaseUpdated) onCaseUpdated(updated);\n    };\n\n    const handleSetAppointment = async () => {\n        if (!caseData.id) return;\n        \n        // Clear any previous errors\n        setAppointmentError('');\n        \n        // Validate that at least one appointment date is filled\n        if (!appointmentDate1 && !appointmentDate2) {\n            setAppointmentError(t('case.details.appointmentError'));\n            return;\n        }\n        \n        // Validate that a doctor is selected\n        if (!selectedDoctorId) {\n            setAppointmentError(t('case.details.doctorError'));\n            return;\n        }\n        \n        const http = HttpService.getInstance();\n        const suggestedAppointments = [];\n        \n        if (appointmentDate1) {\n            suggestedAppointments.push({\n                scheduledStart: appointmentDate1,\n                meetingStatus: 'suggested',\n                durationMinutes: appointmentDuration\n            });\n        }\n        \n        if (appointmentDate2) {\n            suggestedAppointments.push({\n                scheduledStart: appointmentDate2,\n                meetingStatus: 'suggested',\n                durationMinutes: appointmentDuration\n            });\n        }\n        \n        const payload = {\n            caseId: caseData.id,\n            doctorId: selectedDoctorId,\n            suggestedAppointments: suggestedAppointments\n        };\n        \n        const updated = await http.suggestAppointment(payload);\n        if (onCaseUpdated) onCaseUpdated(updated);\n        \n        // Clear the appointment dates and doctor selection after successful submission\n        setAppointmentDate1('');\n        setAppointmentDate2('');\n        setSelectedDoctorId('');\n    };\n\n    if (!isAdmin) return null;\n\n    const buttonWidthClass = 'w-48';\n\n    return (\n        <div className=\"mb-6 bg-background-secondary rounded-lg border border-border-primary p-4 space-y-4\">\n            <h2 className=\"text-lg font-semibold text-foreground-primary\">{t('admin.panel.title') || 'Admin Panel'}</h2>\n\n            {/* Divider between rows */}\n            <Divider marginClass=\"my-1\" />\n\n            {/* Row 1: Notes + Save button */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-4\">\n                    <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">{t('case.details.notes') || 'Notes'}</label>\n                    <textarea\n                        className=\"w-full input-field min-h-[80px] disabled:opacity-60 disabled:cursor-not-allowed\"\n                        value={adminNotes}\n                        onChange={(e) => setAdminNotes(e.target.value)}\n                        disabled={!canEditNotes}\n                    />\n                </div>\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button disabled={!canEditNotes} onClick={handleSaveNotes} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('common.save') || 'Save'}</button>\n                </div>\n            </div>\n\n            {/* Divider */}\n            <Divider marginClass=\"my-3\" />\n\n            {/* Row 2: Offer amount (left) + Send offer (right) */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-3\">\n                    <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">{t('offer.text') || 'Offer text'}</label>\n                    <textarea\n                        className=\"w-full input-field min-h-[80px] disabled:opacity-60 disabled:cursor-not-allowed\"\n                        value={offerText}\n                        onChange={(e) => setOfferText(e.target.value)}\n                        disabled={!canSendOffer}\n                    />\n                </div>\n                <div className=\"md:col-span-1 h-full\">\n                    <CurrencyInputFieldControlled\n                        label={t('offer.amount') || 'Amount'}\n                        value={offerAmount}\n                        onChange={(e) => setOfferAmount(e.target.value)}\n                        disabled={!canSendOffer}\n                        placeholder={t('offer.amount') || 'Amount'}\n                    />\n                </div>\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button disabled={!canSendOffer} onClick={handleSendOffer} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('offer.send') || 'Send offer'}</button>\n                </div>\n            </div>\n\n            {/* Divider */}\n            <Divider marginClass=\"my-3\" />\n\n            {/* Row 3: Mark invoice as paid (right aligned) */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-4\" />\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button disabled={!canMarkPaid} onClick={handleMarkInvoicePaid} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('invoice.paid') || 'Paid'}</button>\n                </div>\n            </div>\n\n            {/* Divider */}\n            <div className=\"my-3 flex justify-center\">\n                <div className=\"h-[1px] w-full\" style={{ backgroundColor: 'var(--border-secondary)' }} />\n            </div>\n\n            {/* Row 4: Existing Appointments */}\n            {caseData.appointments && caseData.appointments.length > 0 && (\n                <div className=\"space-y-4\">\n                    <h3 className=\"text-lg font-semibold text-foreground-primary\">\n                        {t('case.details.existingAppointments') || 'Existing Appointments'}\n                    </h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                        {caseData.appointments.map((appointment) => {\n                            const statusColor = appointment.meetingStatus === 'accepted' ? 'bg-green-100 border-green-300 text-green-800' :\n                                              appointment.meetingStatus === 'suggested' ? 'bg-blue-100 border-blue-300 text-blue-800' :\n                                              appointment.meetingStatus === 'declined' ? 'bg-red-100 border-red-300 text-red-800' :\n                                              appointment.meetingStatus === 'completed' ? 'bg-gray-100 border-gray-300 text-gray-800' :\n                                              appointment.meetingStatus === 'canceled' ? 'bg-orange-100 border-orange-300 text-orange-800' :\n                                              'bg-gray-100 border-gray-300 text-gray-800';\n                            \n                            return (\n                                <div key={appointment.id} className={`border rounded-lg p-4 ${statusColor}`}>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between items-start\">\n                                            <div className=\"text-sm font-medium\">\n                                                {formatDate(appointment.scheduledStart, language)} - {formatTime(appointment.scheduledStart, language)}\n                                            </div>\n                                            <span className={`px-2 py-1 text-xs font-medium rounded-full ${statusColor}`}>\n                                                {appointment.meetingStatus}\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between items-start\">\n                                            {appointment.doctorName && (\n                                                <div className=\"text-sm font-medium\">\n                                                    {appointment.doctorName}\n                                                </div>\n                                            )}\n                                            <span className={`px-2 py-1 text-xs font-medium rounded-full ${statusColor}`}>\n                                                {appointment.durationMinutes} min\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            )}\n\n            {/* Row 5: Appointment suggestions */}\n            <div className=\"space-y-4\">\n                {canSetAppointment && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\n                    <p className=\"text-sm text-blue-800\">\n                        <strong>{t('case.details.timezoneInfo.title') || 'Hinweis:'}</strong> {t('case.details.timezoneInfo.message') || 'Die eingegebene Zeit ist immer in deutscher Zeit (GMT+2).'}\n                    </p>\n                </div>\n                )}\n\n                {/* Appointment Details Row */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div>\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.appointmentDate')} 1\n                        </label>\n                        <input\n                            type=\"datetime-local\"\n                            className={`w-full input-field disabled:opacity-60 disabled:cursor-not-allowed ${\n                                appointmentError ? 'border-red-500 focus:border-red-500 focus:ring-red-500' : ''\n                            }`}\n                            value={appointmentDate1}\n                            min={getMinAppointmentDate()}\n                            onChange={(e) => {\n                                setAppointmentDate1(e.target.value);\n                                // Clear error when user starts typing\n                                if (appointmentError) {\n                                    setAppointmentError('');\n                                }\n                            }}\n                            disabled={!canSetAppointment}\n                        />\n                        {appointmentError && (\n                            <p className=\"mt-1 text-sm text-red-600\">{appointmentError}</p>\n                        )}\n                    </div>\n                    <div>\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.appointmentDate')} 2\n                        </label>\n                        <input\n                            type=\"datetime-local\"\n                            className=\"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed\"\n                            value={appointmentDate2}\n                            min={getMinAppointmentDate()}\n                            onChange={(e) => {\n                                setAppointmentDate2(e.target.value);\n                                // Clear error when user starts typing\n                                if (appointmentError) {\n                                    setAppointmentError('');\n                                }\n                            }}\n                            disabled={!canSetAppointment}\n                        />\n                    </div>\n                    <div>\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.duration')}\n                        </label>\n                        <select\n                            className=\"w-full input-field disabled:opacity-60 disabled:cursor-not-allowed\"\n                            value={appointmentDuration}\n                            onChange={(e) => setAppointmentDuration(Number(e.target.value))}\n                            disabled={!canSetAppointment}\n                        >\n                            <option value={10}>{t('case.details.durationOptions.10min')}</option>\n                            <option value={15}>{t('case.details.durationOptions.15min')}</option>\n                            <option value={20}>{t('case.details.durationOptions.20min')}</option>\n                            <option value={30}>{t('case.details.durationOptions.30min')}</option>\n                            <option value={45}>{t('case.details.durationOptions.45min')}</option>\n                            <option value={60}>{t('case.details.durationOptions.60min')}</option>\n                            <option value={90}>{t('case.details.durationOptions.90min')}</option>\n                            <option value={120}>{t('case.details.durationOptions.120min')}</option>\n                        </select>\n                    </div>\n                </div>\n                \n                {/* Doctor Selection Row */}\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                    <div className=\"md:col-span-4\">\n                        <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">\n                            {t('case.details.doctor')}\n                        </label>\n                        <select\n                            className={`w-full input-field disabled:opacity-60 disabled:cursor-not-allowed ${\n                                appointmentError ? 'border-red-500 focus:border-red-500 focus:ring-red-500' : ''\n                            }`}\n                            value={selectedDoctorId}\n                            onChange={(e) => {\n                                setSelectedDoctorId(e.target.value ? Number(e.target.value) : '');\n                                // Clear error when user makes a selection\n                                if (appointmentError) {\n                                    setAppointmentError('');\n                                }\n                            }}\n                            disabled={!canSetAppointment}\n                        >\n                            <option value=\"\">{t('case.details.selectDoctor')}</option>\n                            {doctors.map(doctor => (\n                                <option key={doctor.id} value={doctor.id}>\n                                    {doctor.user?.firstName} {doctor.user?.lastName}\n                                    {doctor.title && ` (${doctor.title})`}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n                </div>\n                \n                <div className=\"flex justify-end\">\n                    <button \n                        disabled={!canSetAppointment || (!appointmentDate1 && !appointmentDate2) || !selectedDoctorId} \n                        onClick={handleSetAppointment} \n                        className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}\n                    >\n                        {t('case.details.suggestAppointments') || 'Suggest appointments'}\n                    </button>\n                </div>\n            </div>\n\n            {/* Divider between rows */}\n            <Divider marginClass=\"my-1\" />\n\n            {/* Divider between rows */}\n            <Divider marginClass=\"my-1\" />\n\n            {/* Row 5: Status + Set status button */}\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 items-end\">\n                <div className=\"md:col-span-1\">\n                    <label className=\"block text-sm font-medium text-foreground-secondary mb-1\">{t('status.next') || 'Next status'}</label>\n                    <select\n                        className=\"input-field w-full disabled:opacity-60 disabled:cursor-not-allowed\"\n                        value={nextStatus}\n                        onChange={(e) => setNextStatus(e.target.value)}\n                    >\n                        <option value=\"\">{t('common.select') || 'Select'}</option>\n                        {validNextStatuses.map(s => (\n                            <option key={s} value={s}>{translateStatus(s)}</option>\n                        ))}\n                    </select>\n                </div>\n                <div className=\"md:col-span-3\">\n                    <div className=\"flex items-start gap-2 bg-warning-50 text-warning-800 border border-warning-300 rounded-md p-3\">\n                        <ExclamationTriangleIcon className=\"h-5 w-5 text-warning-600 mt-0.5\" />\n                        <p className=\"text-sm\">\n                            {t('admin.status.manualChangeWarning') || 'This action should only be used in special cases. Normally, the status changes automatically.'}\n                        </p>\n                    </div>\n                </div>\n                <div className=\"md:col-span-1 flex md:justify-end\">\n                    <button onClick={handleSetStatus} className={`bg-primary-600 text-white px-4 py-2 rounded-md font-medium hover:bg-primary-700 disabled:opacity-60 disabled:cursor-not-allowed ${buttonWidthClass}`}>{t('status.set') || 'Set status'}</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CaseDetailsAdmin;\n\n\n","import React from 'react';\nimport { Case } from '@/types/case';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { InformationCircleIcon } from '@heroicons/react/24/outline';\nimport { CASE_STATUS } from '@/types/status';\n\ninterface CaseWorkflowInfoProps {\n  caseData: Case;\n}\n\nexport const CaseWorkflowInfo: React.FC<CaseWorkflowInfoProps> = ({ caseData }) => {\n  const { userGroups } = useAuth();\n  const { t } = useLanguage();\n\n  return (\n    <>\n      {/* Payment info */}\n      {userGroups?.includes('patient') && caseData.status?.name === CASE_STATUS.WAITING_FOR_PAYMENT && (\n        <div className=\"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <InformationCircleIcon className=\"h-5 w-5 text-blue-400\" />\n            </div>\n            <div className=\"ml-3 flex-1\">\n              <h3 className=\"text-sm font-medium text-blue-800\">\n                {t('case.details.paymentWarning.title') || 'Payment Required'}\n              </h3>\n              <div className=\"mt-2 text-sm text-blue-700\">\n                <p>\n                  {t('case.details.paymentWarning.message') || 'Please pay the invoice to continue with your case. You received the invoice via email. You can also download the invoice below.'}\n                </p>\n              </div>\n              <div className=\"mt-3 text-xs text-blue-600\">\n                <p>\n                  {t('case.details.paymentWarning.alreadyPaid') || 'Already paid? This info will disappear once payment is confirmed.'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}      \n\n      {/* Offer info */}\n      {userGroups?.includes('patient') && caseData.status?.name === CASE_STATUS.OFFER_SENT && (\n        <div className=\"mb-6 bg-green-50 border border-green-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <InformationCircleIcon className=\"h-5 w-5 text-green-400\" />\n            </div>\n            <div className=\"ml-3 flex-1\">\n              <h3 className=\"text-sm font-medium text-green-800\">\n                {t('case.details.offerInfo.title') || 'Offer Received'}\n              </h3>\n              <div className=\"mt-2 text-sm text-green-700\">\n                <p>\n                  {t('case.details.offerInfo.message') || 'Please read the offer carefully. You received it via email or you can download it below. You need to accept it to continue.'}\n                </p>\n              </div>\n              <div className=\"mt-3 text-xs text-green-600\">\n                <p>\n                  {t('case.details.offerInfo.validity') || 'The offer is valid for 2 weeks.'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Timeslots info */}\n      {userGroups?.includes('patient') && caseData.status?.name === CASE_STATUS.TIMESLOTS_SENT && (\n        <div className=\"mb-6 bg-purple-50 border border-purple-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <InformationCircleIcon className=\"h-5 w-5 text-purple-400\" />\n            </div>\n            <div className=\"ml-3 flex-1\">\n              <h3 className=\"text-sm font-medium text-purple-800\">\n                {t('case.details.timeslotsInfo.title') || 'Choose Your Appointment'}\n              </h3>\n              <div className=\"mt-2 text-sm text-purple-700\">\n                <p>\n                  {t('case.details.timeslotsInfo.message') || 'Please select one of the suggested appointment times below to continue with your case.'}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n","import * as React from \"react\";\nfunction ArrowDownTrayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownTrayIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CalendarDaysIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CalendarDaysIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction LinkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(LinkIcon);\nexport default ForwardRef;","import React, { useEffect, useState } from 'react';\nimport { Case } from '@/types/case';\nimport { Attachment } from '@/types/attachment';\nimport { DoctorProfile } from '@/types/doctor';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { formatDate } from '@/lib/utils';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { Gender } from '@/lib/genderUtils';\nimport { translateDocumentType } from '@/lib/documentUtils';\nimport { ConfirmationModal } from '@/components/common/ConfirmationModal';\nimport UploadAttachmentWizard from '@/components/case/UploadAttachmentWizard';\nimport { HttpService } from '@/services/httpService';\nimport StatusFlowModal from '@/components/status/status-flow-modal';\nimport CaseDetailsAdmin from '@/components/case/case-details-admin';\nimport { CaseWorkflowInfo } from '@/components/case/case-workflow-info';\nimport { DocumentTextIcon, ArrowDownTrayIcon, CalendarDaysIcon, LinkIcon } from '@heroicons/react/24/outline';\nimport AttachmentList from '@/components/attachment/AttachmentList';\nimport { CASE_STATUS, CaseStatusObject } from '@/types/status';\n\ninterface CaseDetailsProps {\n  caseData: Case;\n  onUpdated?: (updated: Case) => void;\n  doctors?: DoctorProfile[];\n}\n\nexport const CaseDetails: React.FC<CaseDetailsProps> = ({ caseData, onUpdated, doctors = [] }) => {\n  const { userGroups } = useAuth();\n  const { language, t, translateSymptomSeverity, translateSymptomDuration, translateStatus, translateGender } = useLanguage();\n  const [deleteModal, setDeleteModal] = useState<{\n    isOpen: boolean;\n    attachment: Attachment | null;\n  }>({\n    isOpen: false,\n    attachment: null,\n  });\n  // Removed per refactor; AttachmentList handles actions without per-item downloading state\n  const [attachments, setAttachments] = useState<Attachment[]>(caseData.attachments || []);\n  const [currentCase, setCurrentCase] = useState<Case>(caseData);\n  const [canSeeDocuments, setCanSeeDocuments] = useState<boolean>(false);\n  const [downloadingDocType, setDownloadingDocType] = useState<string | null>(null);\n  const [isAcceptModalOpen, setIsAcceptModalOpen] = useState<boolean>(false);\n  const [isAccepting, setIsAccepting] = useState<boolean>(false);\n  const [selectedTimeslotId, setSelectedTimeslotId] = useState<number | null>(null);\n\n  useEffect(() => {\n    setAttachments(caseData.attachments || []);\n  }, [caseData.attachments]);\n\n  useEffect(() => {\n    setCanSeeDocuments(Array.isArray(userGroups) ? (userGroups.includes('admin') || userGroups.includes('patient')) : false);\n  }, [userGroups]);\n\n  const isPatient = Array.isArray(userGroups) ? userGroups.includes('patient') : false;\n  const isOfferSent = StatusUtils.extractStatus(currentCase.status) === CASE_STATUS.OFFER_SENT;\n  const canAcceptOffer = isPatient && isOfferSent;\n\n  const offerDocument = (currentCase.documents || []).find(d => String(d.doc_type || '').toLowerCase() === 'offer');\n\n  const getStatusColor = (status: Case['status'] | string | undefined) => {\n    const extracted = StatusUtils.extractStatus(status);\n    if (extracted) {\n      return StatusUtils.getStatusColorClasses(extracted);\n    }\n    return 'status-neutral';\n  };\n\n  const getStatusLabel = (status: Case['status'] | string | undefined) => {\n    const extracted = StatusUtils.extractStatus(status);\n    if (extracted) {\n      return translateStatus(extracted);\n    }\n    // Fallback: try to humanize string or unknown object\n    let name: string | null = null;\n    if (typeof status === 'string') {\n      name = status;\n    } else if (status && typeof status === 'object' && 'name' in status) {\n      const s = status as Partial<CaseStatusObject>;\n      name = typeof s.name === 'string' ? s.name : null;\n    }\n    return (name ? name.replace(/_/g, ' ') : (t('status.unknown') || 'Unknown')) as string;\n  };\n\n  const handleDeleteAttachment = (attachment: Attachment) => {\n    setDeleteModal({\n      isOpen: true,\n      attachment,\n    });\n  };\n\n  const confirmDelete = async () => {\n    try {\n      if (deleteModal.attachment && deleteModal.attachment.id && currentCase.id) {\n        const http = HttpService.getInstance();\n        await http.deleteAttachment({\n          attachmentId: String(deleteModal.attachment.id),\n          caseId: typeof currentCase.id === 'number' ? currentCase.id : Number(currentCase.id),\n        });\n        // Remove from the list only on successful deletion\n        setAttachments(prev => prev.filter(a => a.id !== deleteModal.attachment!.id));\n      }\n    } finally {\n      setDeleteModal({ isOpen: false, attachment: null });\n    }\n  };\n\n  const getAttachmentButtonText = (typeName: string) => {\n    switch (typeName) {\n      case 'DICOM':\n        return t('case.details.download');\n      case 'Link':\n        return t('case.details.open');\n      default:\n        return t('case.details.view');\n    }\n  };\n\n  const handleOpenAttachment = async (attachment: Attachment) => {\n    if (!attachment.id || !currentCase.id) return;\n    const http = HttpService.getInstance();\n    const { url } = await http.getAttachmentUrl({\n      attachmentId: String(attachment.id),\n      caseId: typeof currentCase.id === 'number' ? currentCase.id : Number(currentCase.id),\n    });\n    // Open in new tab; S3 responses may trigger download via content-disposition\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  const handleDownloadDocument = async (docType: string) => {\n    if (!currentCase.id) return;\n    setDownloadingDocType(docType);\n    try {\n      const http = HttpService.getInstance();\n      const { url } = await http.getDocumentUrl({ caseId: String(currentCase.id), docType });\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = '';\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    } finally {\n      setDownloadingDocType(null);\n    }\n  };\n\n  const confirmAcceptOffer = async () => {\n    if (!currentCase.id) return;\n    setIsAccepting(true);\n    try {\n      const http = HttpService.getInstance();\n      const updatedCase: Case = await http.acceptOffer(String(currentCase.id));\n      setCurrentCase(updatedCase);\n      setAttachments(updatedCase.attachments || []);\n      if (onUpdated) onUpdated(updatedCase);\n    } finally {\n      setIsAccepting(false);\n    }\n  };\n\n  const handleAcceptTimeslot = async () => {\n    if (!currentCase.id || !selectedTimeslotId) return;\n    \n    setIsAccepting(true);\n    try {\n      const http = HttpService.getInstance();\n      const updated = await http.acceptAppointment(String(selectedTimeslotId), String(currentCase.id));\n      setCurrentCase(updated);\n      setAttachments(updated.attachments || []);\n      if (onUpdated) onUpdated(updated);\n    } finally {\n      setIsAccepting(false);\n    }\n  };\n\n  const handleDeclineTimeslot = async () => {\n    if (!currentCase.id) return;\n    \n    setIsAccepting(true);\n    try {\n      const http = HttpService.getInstance();\n      const updated = await http.declineAppointment(String(currentCase.id));\n      setCurrentCase(updated);\n      setAttachments(updated.attachments || []);\n      if (onUpdated) onUpdated(updated);\n    } finally {\n      setIsAccepting(false);\n    }\n  };\n\n  const [isUploadOpen, setIsUploadOpen] = useState(false);\n  const [isStatusInfoOpen, setIsStatusInfoOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n  }, [caseData.id]);\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"mb-6 flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-foreground-primary\">Case {currentCase.id}</h1>\n        <div className=\"flex items-center gap-4\">\n          <button\n            type=\"button\"\n            onClick={() => setIsStatusInfoOpen(true)}\n            className=\"text-sm text-primary-600 hover:underline\"\n          >\n            {t('status.moreInfo') || 'Click here for more information'}\n          </button>\n          <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center ${getStatusColor(currentCase.status)}`}>\n            {getStatusLabel(currentCase.status)}\n          </span>\n        </div>\n      </div>\n\n      {/* Admin controls */}\n      <CaseDetailsAdmin caseData={currentCase} doctors={doctors} onCaseUpdated={(updated) => {\n        setCurrentCase(updated);\n        setAttachments(updated.attachments || []);\n        if (onUpdated) onUpdated(updated);\n      }} />\n\n      <CaseWorkflowInfo caseData={currentCase} />\n    \n      {/* Official Documents section */}\n      {canSeeDocuments && currentCase.documents && currentCase.documents.length > 0 && (\n        <div className=\"mb-6 bg-background-secondary rounded-lg border border-border-primary p-6\">\n          <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.receipts') || 'Documents'}</h2>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n            {currentCase.documents.map((doc, idx) => (\n              <div key={`${doc.doc_no || idx}`} className=\"flex items-center justify-between bg-neutral-50 rounded-md p-4 border border-border-primary\">\n                <div className=\"flex-1 mr-4\">\n                  <div className=\"text-xs font-bold text-foreground-tertiary mb-1\">{translateDocumentType(doc.doc_type, t)}</div>\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"shrink-0 text-primary-600\">\n                      <DocumentTextIcon className=\"w-10 h-10\" />\n                    </div>\n                    <div className=\"text-foreground-secondary text-sm\">\n                      {doc.doc_no}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center\">\n                  <button\n                    onClick={() => handleDownloadDocument(doc.doc_type)}\n                    disabled={downloadingDocType === doc.doc_type}\n                    className=\"bg-primary-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-primary-700 transition-colors disabled:opacity-60 inline-flex items-center gap-2\"\n                  >\n                    <ArrowDownTrayIcon className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Accept Offer CTA (shown to patient when status is OFFER_SENT) */}\n      {canAcceptOffer && (\n        <div className=\"m-6 flex justify-center\">\n          <button\n            type=\"button\"\n            onClick={() => setIsAcceptModalOpen(true)}\n            className=\"bg-accent-500 hover:bg-accent-600 text-white px-6 py-2 rounded-md font-medium transition-colors\"\n          >\n            {t('case.details.acceptOffer') || 'Accept offer'}\n          </button>\n        </div>\n      )}\n\n\n      {/* Suggest Appointments CTA (shown to user and admin when status is TIMESLOTS_SENT) */}\n      {currentCase.status?.name === CASE_STATUS.TIMESLOTS_SENT && currentCase.appointments && (\n        <div className=\"mb-6 bg-background-secondary rounded-lg border border-border-primary p-6\">\n          <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">\n            {t('case.details.suggestedTimeslots') || 'Suggested Timeslots'}\n          </h2>\n          \n          {/* Timeslots Grid */}\n          <div className=\"flex flex-wrap justify-center gap-3 mb-6\">\n            {currentCase.appointments\n              .filter(appointment => appointment.meetingStatus === 'suggested')\n              .map((appointment) => {\n                const appointmentDate = new Date(appointment.scheduledStart || '');\n                const isSelected = selectedTimeslotId === appointment.id;\n                \n                return (\n                  <button\n                    key={appointment.id}\n                    onClick={() => {\n                      // Only allow selection for patients\n                      if (userGroups?.includes('patient')) {\n                        setSelectedTimeslotId(isSelected ? null : (appointment.id || null));\n                      }\n                    }}\n                    disabled={!userGroups?.includes('patient')}\n                    className={`\n                      px-4 py-3 rounded-lg border-2 text-center min-w-[200px] transition-all duration-200\n                      ${isSelected \n                        ? 'border-primary-500 bg-primary-50 text-primary-700' \n                        : 'border-border-secondary bg-background-primary text-foreground-primary hover:border-primary-300'\n                      }\n                      ${!userGroups?.includes('patient') \n                        ? 'cursor-default opacity-75' \n                        : 'cursor-pointer hover:shadow-md'\n                      }\n                    `}\n                  >\n                    <div className=\"font-medium\">\n                      {appointmentDate.toLocaleDateString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                        weekday: 'long',\n                        year: 'numeric',\n                        month: 'long',\n                        day: 'numeric',\n                        timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                      })}\n                    </div>\n                    <div className=\"text-sm text-foreground-secondary\">\n                      {appointmentDate.toLocaleTimeString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                        hour: '2-digit',\n                        minute: '2-digit',\n                        timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                      })}\n                    </div>\n                    <div className=\"text-xs text-foreground-secondary mt-1\">\n                      {t('case.details.duration') || 'Duration'}: {appointment.durationMinutes || 30} min\n                    </div>\n                  </button>\n                );\n              })}\n          </div>\n          \n          {/* Action Buttons - Only for patients */}\n          {userGroups?.includes('patient') && (\n            <div className=\"flex justify-center gap-4\">\n              <button\n                onClick={handleDeclineTimeslot}\n                disabled={isAccepting}\n                className={`\n                  px-6 py-3 rounded-lg font-medium transition-all duration-200 border-2\n                  ${!isAccepting\n                    ? 'border-red-500 text-red-600 hover:bg-red-50 hover:border-red-600'\n                    : 'border-gray-300 text-gray-400 cursor-not-allowed'\n                  }\n                `}\n              >\n                {isAccepting \n                  ? (t('common.working') || 'Working...') \n                  : (t('case.details.declineTimeslot') || 'Decline')\n                }\n              </button>\n              <button\n                onClick={handleAcceptTimeslot}\n                disabled={!selectedTimeslotId || isAccepting}\n                className={`\n                  px-6 py-3 rounded-lg font-medium transition-all duration-200\n                  ${selectedTimeslotId && !isAccepting\n                    ? 'bg-primary-600 text-white hover:bg-primary-700 shadow-md'\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  }\n                `}\n              >\n                {isAccepting \n                  ? (t('common.working') || 'Working...') \n                  : (t('case.details.acceptTimeslot') || 'Accept Timeslot')\n                }\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Appointment Arranged Info Box (shown when status is ARRANGED) */}\n      {StatusUtils.extractStatus(currentCase.status) === CASE_STATUS.ARRANGED && currentCase.appointments && (\n        <div className=\"mb-6 bg-green-50 border-2 border-green-200 rounded-lg p-6\">\n          <div className=\"flex items-start\">\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center\">\n                <CalendarDaysIcon className=\"w-5 h-5 text-green-600\" />\n              </div>\n            </div>\n            <div className=\"ml-4 flex-1\">\n              <h3 className=\"text-lg font-semibold text-green-800 mb-2\">\n                {t('case.details.appointmentArranged.title')}\n              </h3>\n              \n              {/* Appointment Details */}\n              {currentCase.appointments\n                .filter(appointment => appointment.meetingStatus === 'accepted' || appointment.meetingStatus === 'arranged')\n                .map((appointment) => {\n                  const appointmentDate = new Date(appointment.scheduledStart || '');\n                  \n                  return (\n                    <div key={appointment.id} className=\"bg-white rounded-md p-4 mb-4 border border-green-200\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                        <div>\n                          <div className=\"text-sm font-medium text-green-700 mb-1\">\n                            {t('case.details.appointmentArranged.date')}\n                          </div>\n                          <div className=\"text-green-800\">\n                            {appointmentDate.toLocaleDateString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                              weekday: 'long',\n                              year: 'numeric',\n                              month: 'long',\n                              day: 'numeric',\n                              timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                            })}\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"text-sm font-medium text-green-700 mb-1\">\n                            {t('case.details.appointmentArranged.time')}\n                          </div>\n                          <div className=\"text-green-800\">\n                            {appointmentDate.toLocaleTimeString(language === 'ro' ? 'ro-RO' : language === 'de' ? 'de-DE' : 'en-GB', {\n                              hour: '2-digit',\n                              minute: '2-digit',\n                              timeZone: language === 'ro' ? 'Europe/Bucharest' : language === 'de' ? 'Europe/Berlin' : 'Europe/London'\n                            })}\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"text-sm font-medium text-green-700 mb-1\">\n                            {t('case.details.appointmentArranged.duration')}\n                          </div>\n                          <div className=\"text-green-800\">\n                            {appointment.durationMinutes || 30} min\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Meeting Link (if available) */}\n                      {appointment.meetingUrl && (\n                        <div className=\"mt-4 pt-4 border-t border-green-200\">\n                          <div className=\"text-sm font-medium text-green-700 mb-2\">\n                            Meeting Link:\n                          </div>\n                          <a \n                            href={appointment.meetingUrl}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition-colors\"\n                          >\n                            <LinkIcon className=\"w-4 h-4 mr-2\" />\n                            Join Meeting\n                          </a>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              \n              {/* Instructions */}\n              <div className=\"text-green-700 text-sm leading-relaxed\">\n                {t('case.details.appointmentArranged.message')}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Main Content - Grid Layout */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Medical Form - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">\n              {currentCase.has_diagnosis ? t('case.details.diagnosis') : t('case.details.medicalForm')}\n            </h2>\n            <div className=\"space-y-4\">\n              {currentCase.has_diagnosis ? (\n                <AttachmentList\n                  items={(attachments || []).filter(a => a.is_diagnosis).map((attachment, index) => ({\n                    id: String(attachment.id || index),\n                    label: attachment.type.name === 'Link' ? (attachment.description || attachment.url || `Link ${index + 1}`) : (attachment.originalName || `Document ${index + 1}`),\n                    typeName: attachment.type.name,\n                    showDelete: !attachment.is_diagnosis,\n                    metaRight: formatDate(attachment.createdAt, language),\n                  }))}\n                  showOpen={true}\n                  openText={(item) => {\n                    const type = (attachments || []).find(a => String(a.id) === String(item.id))?.type?.name || '';\n                    return getAttachmentButtonText(type);\n                  }}\n                  onOpen={(id) => {\n                    const a = (attachments || []).find(x => String(x.id) === String(id));\n                    if (a) handleOpenAttachment(a);\n                  }}\n                  deleteText={t('case.details.delete') || 'Delete'}\n                />\n              ) : (\n                <>\n                  {currentCase.symptoms && currentCase.symptoms.length > 0 ? (\n                    currentCase.symptoms.map((symptom, index) => (\n                      <div key={index} className=\"bg-neutral-50 rounded-md p-4 border border-border-primary\">\n                        <div className=\"font-medium text-foreground-primary mb-1\">\n                          {`${t('case.details.symptom')} ${index + 1} - ${translateSymptomSeverity(symptom.severity)} (${translateSymptomDuration(symptom.duration)})`}\n                        </div>\n                        <div className=\"text-foreground-secondary\">\n                          {symptom.description || t('case.details.answerOfUser')}\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"text-center py-8 text-foreground-tertiary\">\n                      <p className=\"text-sm\">No symptoms recorded</p>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Notes - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.notes')}</h2>\n            <div className=\"bg-neutral-50 rounded-md p-4 min-h-[200px] border border-border-primary\">\n              <textarea\n                className=\"w-full h-full bg-transparent border-none outline-none resize-none text-foreground-secondary placeholder-foreground-tertiary\"\n                placeholder={t('case.details.notesPlaceholder')}\n                defaultValue={currentCase.case_notes || ''}\n                rows={8}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Documents - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.documents')}</h2>\n            <div className=\"space-y-3\">\n              <AttachmentList\n                items={(attachments || []).filter(a => !a.is_diagnosis).map((attachment, index) => ({\n                  id: String(attachment.id || index),\n                  label: attachment.type.name === 'Link' ? (attachment.description || attachment.url || `Link ${index + 1}`) : (attachment.originalName || `Document ${index + 1}`),\n                  typeName: attachment.type.name,\n                  showDelete: !attachment.is_diagnosis,\n                  metaRight: formatDate(attachment.createdAt, language),\n                }))}\n                showOpen={true}\n                openText={(item) => {\n                  const type = (attachments || []).find(a => String(a.id) === String(item.id))?.type?.name || '';\n                  return getAttachmentButtonText(type);\n                }}\n                onOpen={(id) => {\n                  const a = (attachments || []).find(x => String(x.id) === String(id));\n                  if (a) handleOpenAttachment(a);\n                }}\n                onDelete={(id) => {\n                  const a = (attachments || []).find(x => String(x.id) === String(id));\n                  if (a) handleDeleteAttachment(a);\n                }}\n                deleteText={t('case.details.delete') || 'Delete'}\n              />\n              <div className=\"flex justify-end pt-4\">\n                <button onClick={() => setIsUploadOpen(true)} className=\"bg-primary-600 text-white px-6 py-2 rounded-md font-medium hover:bg-primary-700 transition-colors\">\n                  {t('case.details.upload')}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Additional Info - Takes 1 column on desktop */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-background-secondary rounded-lg border border-border-primary p-6 h-full\">\n            <h2 className=\"text-xl font-bold text-foreground-primary mb-4\">{t('case.details.infos')}</h2>\n            <div className=\"bg-neutral-50 rounded-md p-4 space-y-3 border border-border-primary\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.customerName')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer ? `${currentCase.customer.firstName || ''} ${currentCase.customer.lastName || ''}`.trim() || t('demographic.notProvided') : t('demographic.userNotFound')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.appointmentDate')}</span>\n                <span className=\"text-foreground-secondary\">25.08.2025</span>\n              </div>\n              <hr className=\"border-border-primary\" />\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.gender')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.gender ? translateGender(currentCase.customer.gender as Gender) : t('demographic.notProvided')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.height')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.height ? `${currentCase.customer.height}cm` : t('demographic.notProvided')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.weight')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.weight ? `${currentCase.customer.weight}kg` : t('demographic.notProvided')}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"font-medium text-foreground-primary\">{t('case.details.dateOfBirth')}</span>\n                <span className=\"text-foreground-secondary\">\n                  {currentCase.customer?.dateOfBirth ? (() => {\n                    const dateString = typeof currentCase.customer!.dateOfBirth === 'string' \n                      ? currentCase.customer!.dateOfBirth as string \n                      : currentCase.customer!.dateOfBirth.toISOString();\n                    return formatDate(dateString, language);\n                  })() : t('demographic.notProvided')}\n                </span>\n              </div>\n              <hr className=\"border-border-primary\" />\n              {/* Additional info fields can be added here as they become available */}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Delete Confirmation Modal */}\n      <ConfirmationModal\n        isOpen={deleteModal.isOpen}\n        onClose={() => setDeleteModal({ isOpen: false, attachment: null })}\n        onConfirm={confirmDelete}\n        title={t('case.details.deleteConfirmTitle')}\n        message={t('case.details.deleteConfirm')}\n      />\n\n      {/* Accept Offer Confirmation Modal */}\n      <ConfirmationModal\n        isOpen={isAcceptModalOpen}\n        onClose={() => setIsAcceptModalOpen(false)}\n        onConfirm={confirmAcceptOffer}\n        title={t('case.details.acceptOfferTitle') || 'Accept offer'}\n        message={(t('case.details.acceptOfferMessage') || `Do you want to accept the offer${offerDocument?.doc_no ? ` ${offerDocument.doc_no}` : ''}? By accepting, you confirm that you have read and understood the offer.`) as string}\n        confirmText={isAccepting ? (t('common.working') || 'Working...') : (t('case.details.acceptOffer') || 'Accept offer')}\n        cancelText={t('case.details.cancel') || 'Cancel'}\n      />\n\n      {/* Upload Wizard */}\n      <UploadAttachmentWizard\n        isOpen={isUploadOpen}\n        onClose={() => setIsUploadOpen(false)}\n        caseId={typeof currentCase.id === 'number' ? currentCase.id : (currentCase.id ? Number(currentCase.id) : undefined)}\n        onUploaded={async () => {\n          // After successful upload, refetch the case to refresh attachments\n          if (!currentCase.id) return;\n          const http = HttpService.getInstance();\n          const refreshed = await http.getCaseById(String(currentCase.id));\n          setAttachments(refreshed.attachments || []);\n        }}\n      />\n\n      {/* Status flow modal */}\n      <StatusFlowModal\n        isOpen={isStatusInfoOpen}\n        onClose={() => setIsStatusInfoOpen(false)}\n        currentStatus={StatusUtils.extractStatus(currentCase.status)}\n      />\n    </div>\n  );\n};\n","import * as React from \"react\";\nfunction BoltIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BoltIcon);\nexport default ForwardRef;","import React from 'react';\nimport { Case } from '@/types/case';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { StatusUtils } from '@/lib/statusUtils';\nimport { useLoadingStore } from '@/services/loadingService';\nimport { DocumentTextIcon, ClockIcon, BoltIcon } from '@heroicons/react/24/outline';\n\ninterface CaseListProps {\n  cases: Case[];\n  onCaseClick?: (caseId: string) => void;\n  className?: string;\n  viewMode?: 'standard' | 'arranged';\n}\n\nconst CaseList: React.FC<CaseListProps> = ({ cases, onCaseClick, className = '', viewMode = 'standard' }) => {\n  const { t, translateStatus } = useLanguage();\n  const { isLoading } = useLoadingStore();\n\n  const getStatusColor = (status: Case['status']) => {\n    if (!status || !status.name) {\n      return 'status-neutral';\n    }\n    const caseStatus = StatusUtils.toCaseStatus(status.name);\n    if (caseStatus) {\n      return StatusUtils.getStatusColorClasses(caseStatus);\n    }\n    return 'status-neutral';\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  const getStatusLabel = (status: Case['status']) => {\n    if (!status || !status.name) {\n      return t('status.unknown') || 'Unknown';\n    }\n    const caseStatus = StatusUtils.toCaseStatus(status.name);\n    if (caseStatus) {\n      return translateStatus(caseStatus);\n    }\n    return status.name.replace(/_/g, ' ');\n  };\n\n  const getCaseDescription = (caseItem: Case): string => {\n    // If case has diagnosis, show diagnosis text\n    if (caseItem.has_diagnosis) {\n      return t('case.details.withExistingDiagnosis') || 'With an existing diagnosis';\n    }\n    \n    // First try to use the case description\n    if (caseItem.description && caseItem.description.trim()) {\n      return caseItem.description;\n    }\n    \n    // If no description, try to use the first symptom's description\n    if (caseItem.symptoms && caseItem.symptoms.length > 0) {\n      const firstSymptom = caseItem.symptoms[0];\n      if (firstSymptom.description && firstSymptom.description.trim()) {\n        // Truncate if too long and add ellipsis\n        const description = firstSymptom.description.trim();\n        return description.length > 100 ? `${description.substring(0, 100)}...` : description;\n      }\n    }\n    \n    // If no symptoms, try case notes\n    if (caseItem.case_notes && caseItem.case_notes.trim()) {\n      const notes = caseItem.case_notes.trim();\n      return notes.length > 100 ? `${notes.substring(0, 100)}...` : notes;\n    }\n    \n    // Fallback to translated \"no description\"\n    return t('case.noDescription') || 'No description';\n  };\n\n  // Get accepted appointment (the one that is arranged/accepted)\n  const getAcceptedAppointment = (caseItem: Case) => {\n    if (!caseItem.appointments || caseItem.appointments.length === 0) {\n      return null;\n    }\n    \n    // Find appointment with scheduledStart (accepted appointment)\n    // Usually the most recent one with a scheduledStart\n    const acceptedAppointments = caseItem.appointments\n      .filter(apt => apt.scheduledStart)\n      .sort((a, b) => {\n        const dateA = a.scheduledStart ? new Date(a.scheduledStart).getTime() : 0;\n        const dateB = b.scheduledStart ? new Date(b.scheduledStart).getTime() : 0;\n        return dateB - dateA; // Most recent first\n      });\n    \n    return acceptedAppointments.length > 0 ? acceptedAppointments[0] : null;\n  };\n\n  // Format duration from minutes to readable format\n  const formatDuration = (minutes?: number): string => {\n    if (!minutes) return '';\n    if (minutes < 60) {\n      return `${minutes} min`;\n    }\n    const hours = Math.floor(minutes / 60);\n    const mins = minutes % 60;\n    if (mins === 0) {\n      return `${hours} ${hours === 1 ? 'hour' : 'hours'}`;\n    }\n    return `${hours}h ${mins}min`;\n  };\n\n  // Get customer name\n  const getCustomerName = (caseItem: Case): string => {\n    if (caseItem.customer?.firstName && caseItem.customer?.lastName) {\n      return `${caseItem.customer.firstName} ${caseItem.customer.lastName}`;\n    }\n    if (caseItem.customer?.firstName) {\n      return caseItem.customer.firstName;\n    }\n    if (caseItem.customer?.lastName) {\n      return caseItem.customer.lastName;\n    }\n    return t('case.details.customerName')?.replace(':', '') || 'Customer';\n  };\n\n  // Show loading state when data is being fetched\n  if (isLoading) {\n    return (\n      <div className={`text-center py-12 ${className}`}>\n        <div className=\"text-foreground-tertiary\">\n          <h3 className=\"text-lg font-semibold text-foreground-primary mb-2\">\n            {t('common.loading') || 'Loading cases...'}\n          </h3>\n          <p className=\"text-sm text-foreground-secondary\">\n            {t('case.loadingDescription') || 'Please wait while we fetch your cases.'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (cases.length === 0) {\n    return (\n      <div className={`text-center py-12 ${className}`}>\n        <div className=\"text-foreground-tertiary\">\n          <DocumentTextIcon className=\"mx-auto h-16 w-16 text-foreground-tertiary mb-4\" />\n          <h3 className=\"text-lg font-semibold text-foreground-primary mb-2\">\n            {t('case.noCases') || 'No cases found'}\n          </h3>\n          <p className=\"text-sm text-foreground-secondary\">\n            {t('case.noCasesDescription') || 'Get started by creating your first case.'}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {cases.map((caseItem) => (\n        <div\n          key={caseItem.id}\n          className={`bg-background-primary border border-border-primary rounded-lg p-6 hover:shadow-lg transition-all duration-200 ${\n            onCaseClick ? 'cursor-pointer hover:border-border-secondary' : ''\n          }`}\n          onClick={() => onCaseClick?.(caseItem.id?.toString() || '')}\n        >\n          <div className=\"flex items-start justify-between\">\n            {/* Left side - Content */}\n            <div className=\"flex-1 min-w-0\">\n              {viewMode !== 'arranged' && (\n                <div className=\"flex items-center space-x-3 mb-3\">\n                  <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center ${getStatusColor(caseItem.status)}`}>\n                    {getStatusLabel(caseItem.status)}\n                  </span>\n                </div>\n              )}\n              \n              {viewMode === 'arranged' ? (\n                <>\n                  {/* Arranged view: Date and duration row */}\n                  {(() => {\n                    const appointment = getAcceptedAppointment(caseItem);\n                    return (\n                      <div className=\"flex items-center gap-4 text-sm text-foreground-secondary mb-2\">\n                        <div>\n                          <span className=\"font-medium text-foreground-primary\">{t('case.details.appointmentArranged.date') || 'Appointment Date'}:</span> {appointment?.scheduledStart ? formatDate(appointment.scheduledStart) : (formatDate(caseItem.createdAt || ''))}\n                        </div>\n                        {appointment?.durationMinutes && (\n                          <div className=\"flex items-center gap-1\">\n                            <ClockIcon className=\"w-4 h-4 text-foreground-tertiary\" />\n                            <span className=\"font-medium text-foreground-primary\">{t('case.details.duration') || 'Duration'}:</span> {formatDuration(appointment.durationMinutes)}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })()}\n\n                  {/* Arranged view: Customer name */}\n                  <div className=\"text-base text-foreground-primary font-medium mb-2\">\n                    {getCustomerName(caseItem)}\n                  </div>\n                  \n                  {/* Arranged view: Additional content can go here if needed */}\n                </>\n              ) : (\n                <>\n                  {/* Standard view: Case description */}\n                  <div className=\"text-base text-foreground-primary font-medium mb-2\">\n                    {getCaseDescription(caseItem)}\n                  </div>\n                  \n                  {/* Additional case details */}\n                  {(caseItem.duration || caseItem.severity) && (\n                    <div className=\"flex items-center space-x-6 text-sm text-foreground-secondary\">\n                      {caseItem.duration && (\n                        <div className=\"flex items-center space-x-1\">\n                          <ClockIcon className=\"w-4 h-4 text-foreground-tertiary\" />\n                          <span>{t('case.duration') || 'Duration'}: {caseItem.duration}</span>\n                        </div>\n                      )}\n                      {caseItem.severity && (\n                        <div className=\"flex items-center space-x-1\">\n                          <BoltIcon className=\"w-4 h-4 text-foreground-tertiary\" />\n                          <span>{t('case.severity') || 'Severity'}: {caseItem.severity}</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n            \n            {/* Right side - Status/Date */}\n            <div className=\"flex-shrink-0 ml-4 text-right\">\n              {viewMode === 'arranged' ? (\n                <>\n                  {/* Arranged view: Status pill aligned right */}\n                  <div className=\"flex justify-end\">\n                    <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium shadow-sm min-w-[100px] justify-center text-foreground-primary ${getStatusColor(caseItem.status)}`}>\n                      {getStatusLabel(caseItem.status)}\n                    </span>\n                  </div>\n                </>\n              ) : (\n                <>\n                  {/* Standard view: Creation date */}\n                  <div className=\"text-sm text-foreground-tertiary\">\n                    <div className=\"font-medium text-foreground-primary\">\n                      {t('case.created') || 'Created'}\n                    </div>\n                    <div className=\"text-foreground-tertiary\">\n                      {formatDate(caseItem.createdAt || '')}\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default CaseList;\n","import React from 'react';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface ConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n}\n\nexport const ConfirmationModal: React.FC<ConfirmationModalProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmText,\n  cancelText\n}) => {\n  const { t } = useLanguage();\n\n  if (!isOpen) return null;\n\n  const handleConfirm = () => {\n    onConfirm();\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      {/* Backdrop */}\n      <div \n        className=\"absolute inset-0 bg-black bg-opacity-50\"\n        onClick={onClose}\n      />\n      \n      {/* Modal */}\n      <div className=\"relative bg-background-primary rounded-lg shadow-xl max-w-md w-full mx-4 p-6\">\n        {/* Header */}\n        <div className=\"mb-4\">\n          <h3 className=\"text-lg font-semibold text-foreground-primary\">\n            {title}\n          </h3>\n        </div>\n        \n        {/* Content */}\n        <div className=\"mb-6\">\n          <p className=\"text-foreground-secondary\">\n            {message}\n          </p>\n        </div>\n        \n        {/* Actions */}\n        <div className=\"flex justify-end gap-3\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-sm font-medium text-foreground-secondary bg-background-secondary border border-border-primary rounded-md hover:bg-background-tertiary transition-colors\"\n          >\n            {cancelText || t('case.details.cancel')}\n          </button>\n          <button\n            onClick={handleConfirm}\n            className=\"px-4 py-2 text-sm font-medium text-white border border-accent-600 rounded-md bg-accent-500 hover:bg-accent-600 transition-colors\"\n          >\n            {confirmText || t('case.details.delete')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}; ","import { UseFormRegister, RegisterOptions, FieldValues, Path } from 'react-hook-form';\nimport { ExclamationCircleIcon } from '@heroicons/react/24/outline';\n\ninterface BaseCurrencyInputFieldProps {\n  label: string;\n  error?: string;\n  required?: boolean;\n  tooltip?: string;\n  className?: string;\n  currency?: string;\n  placeholder?: string;\n  disabled?: boolean;\n}\n\ninterface ReactHookFormProps<T extends FieldValues> extends BaseCurrencyInputFieldProps {\n  name: Path<T>;\n  register: UseFormRegister<T>;\n  validation?: RegisterOptions<T>;\n}\n\ninterface ControlledInputProps extends BaseCurrencyInputFieldProps {\n  name?: string;\n  value: string;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\n// React Hook Form version\nexport const CurrencyInputField = <T extends FieldValues>({\n  label,\n  name,\n  register,\n  error,\n  required = false,\n  tooltip,\n  validation = {},\n  className = '',\n  currency = 'LEI',\n  placeholder,\n  disabled = false\n}: ReactHookFormProps<T>) => {\n  return (\n    <div className={`mb-4 ${className}`}>\n      <div className=\"flex items-center gap-1\">\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {label}\n          {required && <span className=\"text-error-500 ml-1\">*</span>}\n        </label>\n        {tooltip && (\n          <div className=\"relative group\">\n            <span className=\"cursor-help text-foreground-tertiary hover:text-foreground-secondary\">\n              <ExclamationCircleIcon className=\"w-4 h-4\" />\n            </span>\n            <div className=\"absolute z-10 invisible group-hover:visible bg-neutral-900 text-white text-sm rounded p-2 bottom-full mb-1 w-48\">\n              {tooltip}\n            </div>\n          </div>\n        )}\n      </div>\n      <div className=\"relative\">\n        <input\n          type=\"number\"\n          min=\"0\"\n          step=\"0.01\"\n          placeholder={placeholder}\n          disabled={disabled}\n          {...register(name, {\n            min: { value: 0, message: 'Amount must be positive' },\n            ...(validation || {})\n          })}\n          className=\"w-full input-field [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none disabled:opacity-60 disabled:cursor-not-allowed\"\n        />\n        <div className=\"absolute top-2 right-0 flex items-center pr-3\">\n          <div className=\"h-6 border-l border-slate-200 mr-2\"></div>\n          <span className=\"h-full text-sm flex justify-center items-center text-slate-700 focus:outline-none\">\n            {currency}\n          </span>\n        </div>\n      </div>\n      {error && <p className=\"mt-2 text-sm text-error-600\">{error}</p>}\n    </div>\n  );\n};\n\n// Controlled input version\nexport const CurrencyInputFieldControlled = ({\n  label,\n  name,\n  value,\n  onChange,\n  error,\n  required = false,\n  tooltip,\n  className = '',\n  currency = 'LEI',\n  placeholder,\n  disabled = false\n}: ControlledInputProps) => {\n  return (\n    <div className={`mb-4 ${className}`}>\n      <div className=\"flex items-center gap-1\">\n        <label className=\"block text-base font-medium text-heading mb-2\">\n          {label}\n          {required && <span className=\"text-error-500 ml-1\">*</span>}\n        </label>\n        {tooltip && (\n          <div className=\"relative group\">\n            <span className=\"cursor-help text-foreground-tertiary hover:text-foreground-secondary\">\n              <ExclamationCircleIcon className=\"w-4 h-4\" />\n            </span>\n            <div className=\"absolute z-10 invisible group-hover:visible bg-neutral-900 text-white text-sm rounded p-2 bottom-full mb-1 w-48\">\n              {tooltip}\n            </div>\n          </div>\n        )}\n      </div>\n      <div className=\"relative\">\n        <input\n          type=\"number\"\n          min=\"0\"\n          step=\"0.01\"\n          placeholder={placeholder}\n          disabled={disabled}\n          value={value}\n          onChange={onChange}\n          name={name}\n          className=\"w-full input-field [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none disabled:opacity-60 disabled:cursor-not-allowed\"\n        />\n        <div className=\"absolute top-2 right-0 flex items-center pr-3\">\n          <div className=\"h-6 border-l border-slate-200 mr-2\"></div>\n          <span className=\"h-full text-sm flex justify-center items-center text-slate-700 focus:outline-none\">\n            {currency}\n          </span>\n        </div>\n      </div>\n      {error && <p className=\"mt-2 text-sm text-error-600\">{error}</p>}\n    </div>\n  );\n};\n","'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n  const { t } = useLanguage();\n\n  useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/auth/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background-secondary\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\n          <p className=\"text-body\">{t('common.loading')}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null; // Will redirect to login\n  }\n\n  return <>{children}</>;\n}; ","import * as React from \"react\";\nfunction ClockIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClockIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentTextIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentTextIcon);\nexport default ForwardRef;"],"names":["getValidTransitions","status","StatusUtils","isOpen","StatusFlowModal","onClose","currentStatus","t","useLanguage","statusesInOrder","useMemo","CASE_STATUS","NEW","OFFER_SENT","WAITING_FOR_PAYMENT","PAID","TIMESLOTS_SENT","ARRANGED","IN_CONSULTATION","FINISHED","DECLINED","allowedNext","badgeWidth","labels","map","s","statusToTranslationKey","ctx","document","createElement","getContext","font","max","label","w","measureText","width","Math","ceil","Modal","size","title","div","className","ol","info","getStatusInfo","colorClass","getStatusColorClasses","isCurrent","isNext","includes","li","span","style","undefined","toLowerCase","description","caseData","CaseDetailsAdmin","onCaseUpdated","doctors","translateStatus","language","adminNotes","setAdminNotes","useState","admin_notes","nextStatus","setNextStatus","appointmentDate1","setAppointmentDate1","appointmentDate2","setAppointmentDate2","appointmentDuration","setAppointmentDuration","appointmentError","setAppointmentError","selectedDoctorId","setSelectedDoctorId","getMinAppointmentDate","twoDaysFromNow","Date","getTime","toISOString","slice","setIsAdmin","offerAmount","setOfferAmount","offerText","setOfferText","useEffect","mounted","session","fetchAuthSession","idPayload","tokens","idToken","payload","groups","toCaseStatus","name","validNextStatuses","canEditNotes","isActiveStatus","canSendOffer","canSetAppointment","id","handleSaveNotes","http","HttpService","getInstance","updated","updateCase","String","handleSetStatus","statusPayload","handleSendOffer","amount","Number","sendOffer","caseId","text","amount_gross","handleMarkInvoicePaid","markInvoicePaid","handleSetAppointment","suggestedAppointments","push","scheduledStart","meetingStatus","durationMinutes","doctorId","suggestAppointment","isAdmin","buttonWidthClass","h2","Divider","marginClass","textarea","value","onChange","e","target","disabled","button","onClick","CurrencyInputFieldControlled","placeholder","canMarkPaid","backgroundColor","appointments","length","h3","statusColor","appointment","formatDate","formatTime","doctorName","p","strong","input","type","min","select","option","doctor","user","firstName","lastName","ExclamationTriangleIcon","CaseWorkflowInfo","userGroups","useAuth","InformationCircleIcon","ForwardRef","React","ArrowDownTrayIcon","svgRef","titleId","props","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","strokeLinecap","strokeLinejoin","d","LinkIcon","CaseDetails","currentCase","onUpdated","translateSymptomSeverity","translateSymptomDuration","translateGender","deleteModal","setDeleteModal","attachment","attachments","setAttachments","setCurrentCase","canSeeDocuments","setCanSeeDocuments","downloadingDocType","setDownloadingDocType","isAcceptModalOpen","setIsAcceptModalOpen","isAccepting","setIsAccepting","selectedTimeslotId","setSelectedTimeslotId","Array","isArray","isPatient","isOfferSent","extractStatus","offerDocument","documents","find","doc_type","handleDeleteAttachment","confirmDelete","deleteAttachment","attachmentId","prev","filter","a","getAttachmentButtonText","typeName","handleOpenAttachment","url","getAttachmentUrl","window","open","handleDownloadDocument","docType","getDocumentUrl","href","download","body","appendChild","click","remove","confirmAcceptOffer","updatedCase","acceptOffer","handleAcceptTimeslot","acceptAppointment","handleDeclineTimeslot","declineAppointment","isUploadOpen","setIsUploadOpen","isStatusInfoOpen","setIsStatusInfoOpen","h1","getStatusColor","extracted","replace","doc","idx","translateDocumentType","normalized","trim","charAt","toUpperCase","DocumentTextIcon","doc_no","appointmentDate","isSelected","toLocaleDateString","weekday","year","month","day","timeZone","toLocaleTimeString","hour","minute","CalendarDaysIcon","meetingUrl","rel","has_diagnosis","AttachmentList","items","is_diagnosis","index","originalName","showDelete","metaRight","createdAt","showOpen","openText","item","onOpen","x","deleteText","symptoms","symptom","severity","duration","defaultValue","case_notes","rows","onDelete","customer","hr","gender","height","weight","dateOfBirth","dateString","ConfirmationModal","onConfirm","message","confirmText","cancelText","UploadAttachmentWizard","onUploaded","getCaseById","BoltIcon","CaseList","cases","onCaseClick","viewMode","isLoading","useLoadingStore","caseStatus","getStatusLabel","getCaseDescription","caseItem","firstSymptom","substring","notes","getAcceptedAppointment","acceptedAppointments","apt","sort","b","dateA","dateB","formatDuration","minutes","hours","floor","mins","getCustomerName","toString","ClockIcon","handleConfirm","CurrencyInputField","register","error","required","tooltip","validation","currency","ExclamationCircleIcon","step","ProtectedRoute","children","isAuthenticated","loading","router","useRouter"],"sourceRoot":"","ignoreList":[4,5,6,8,13,14]}